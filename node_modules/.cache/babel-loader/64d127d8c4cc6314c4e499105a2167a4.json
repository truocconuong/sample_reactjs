{"ast":null,"code":"var _jsxFileName = \"/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Service/withAuth.js\";\nimport React, { Component } from \"react\";\nimport AuthService from \"./AuthService.js\";\nimport Login from \"../Components/Login/LoginAdmin.js\";\nimport Loading from \"../Components/libs/PageLoader/fbloader.js\";\nimport { setRole } from \"../redux/actions\";\nimport { connect } from \"react-redux\";\nimport Network from \"./Network\";\nexport default function withAuth(AuthComponent) {\n  const Auth = new AuthService();\n  const api = new Network();\n\n  class Authenticated extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        isLogin: false,\n        isLoading: false,\n        classHide: \"hideInAuth\"\n      };\n      this.checkLogin = this.checkLogin.bind(this);\n    }\n\n    async checkLogin() {\n      // console.log(\"ISLOGIN\", Auth.loggedIn());\n      try {\n        this.setState({\n          isLoading: true\n        });\n        let role = await Auth.loggedIn();\n\n        if (role) {\n          // console.log(\"auth: \", role)\n          await this.props.setRole(role);\n          this.setState({\n            isLogin: true\n          });\n        } else {\n          this.setState({\n            isLogin: false\n          });\n        }\n\n        setTimeout(() => {\n          this.setState({\n            isLoading: false,\n            classHide: \"\"\n          });\n        }, 100);\n      } catch (error) {\n        console.log(\"err in with auth: \", error);\n      }\n    }\n\n    componentDidMount() {\n      this.checkLogin();\n    }\n\n    render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 9\n        }\n      }, this.state.isLoading ? /*#__PURE__*/React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 35\n        }\n      }) : null, /*#__PURE__*/React.createElement(\"div\", {\n        className: `with_auth_div ${this.state.classHide}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }\n      }, !this.state.isLogin ? /*#__PURE__*/React.createElement(Login, Object.assign({}, this.props, {\n        auth: Auth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }\n      })) : /*#__PURE__*/React.createElement(AuthComponent, Object.assign({}, this.props, {\n        auth: Auth,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }\n      }))));\n    }\n\n  }\n\n  const mapDispatchToProps = dispatch => {\n    return {\n      setRole: role => dispatch(setRole(role))\n    };\n  };\n\n  const mapStateToProps = (state, ownProps) => {\n    return {};\n  };\n\n  return connect(mapStateToProps, mapDispatchToProps)(Authenticated);\n}","map":{"version":3,"sources":["/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Service/withAuth.js"],"names":["React","Component","AuthService","Login","Loading","setRole","connect","Network","withAuth","AuthComponent","Auth","api","Authenticated","constructor","props","state","isLogin","isLoading","classHide","checkLogin","bind","setState","role","loggedIn","setTimeout","error","console","log","componentDidMount","render","mapDispatchToProps","dispatch","mapStateToProps","ownProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,OAAOC,KAAP,MAAkB,mCAAlB;AACA,OAAOC,OAAP,MAAoB,2CAApB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,eAAe,SAASC,QAAT,CAAkBC,aAAlB,EAAiC;AAC9C,QAAMC,IAAI,GAAG,IAAIR,WAAJ,EAAb;AACA,QAAMS,GAAG,GAAG,IAAIJ,OAAJ,EAAZ;;AACA,QAAMK,aAAN,SAA4BX,SAA5B,CAAsC;AACpCY,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,YAAMA,KAAN;AACA,WAAKC,KAAL,GAAa;AACXC,QAAAA,OAAO,EAAE,KADE;AAEXC,QAAAA,SAAS,EAAE,KAFA;AAGXC,QAAAA,SAAS,EAAE;AAHA,OAAb;AAKA,WAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AACD,UAAMD,UAAN,GAAmB;AACjB;AACA,UAAI;AACF,aAAKE,QAAL,CAAc;AACZJ,UAAAA,SAAS,EAAE;AADC,SAAd;AAGA,YAAIK,IAAI,GAAG,MAAMZ,IAAI,CAACa,QAAL,EAAjB;;AACA,YAAID,IAAJ,EAAU;AACR;AACA,gBAAM,KAAKR,KAAL,CAAWT,OAAX,CAAmBiB,IAAnB,CAAN;AACA,eAAKD,QAAL,CAAc;AAAEL,YAAAA,OAAO,EAAE;AAAX,WAAd;AACD,SAJD,MAIO;AACL,eAAKK,QAAL,CAAc;AAAEL,YAAAA,OAAO,EAAE;AAAX,WAAd;AACD;;AACDQ,QAAAA,UAAU,CAAC,MAAM;AACf,eAAKH,QAAL,CAAc;AACZJ,YAAAA,SAAS,EAAE,KADC;AAEZC,YAAAA,SAAS,EAAE;AAFC,WAAd;AAID,SALS,EAKP,GALO,CAAV;AAMD,OAlBD,CAkBE,OAAOO,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,KAAlC;AACD;AACF;;AAEDG,IAAAA,iBAAiB,GAAG;AAElB,WAAKT,UAAL;AACD;;AAEDU,IAAAA,MAAM,GAAG;AACP,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKd,KAAL,CAAWE,SAAX,gBAAuB,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAvB,GAAqC,IADxC,eAEE;AAAK,QAAA,SAAS,EAAG,iBAAgB,KAAKF,KAAL,CAAWG,SAAU,EAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEG,CAAC,KAAKH,KAAL,CAAWC,OAAZ,gBACC,oBAAC,KAAD,oBAAW,KAAKF,KAAhB;AAAuB,QAAA,IAAI,EAAEJ,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADD,gBAGC,oBAAC,aAAD,oBAAmB,KAAKI,KAAxB;AAA+B,QAAA,IAAI,EAAEJ,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SALJ,CAFF,CADF;AAaD;;AAtDmC;;AAwDtC,QAAMoB,kBAAkB,GAAIC,QAAD,IAAc;AACvC,WAAO;AACL1B,MAAAA,OAAO,EAAGiB,IAAD,IAAUS,QAAQ,CAAC1B,OAAO,CAACiB,IAAD,CAAR;AADtB,KAAP;AAGD,GAJD;;AAKA,QAAMU,eAAe,GAAG,CAACjB,KAAD,EAAQkB,QAAR,KAAqB;AAC3C,WAAO,EAAP;AACD,GAFD;;AAGA,SAAO3B,OAAO,CAAC0B,eAAD,EAAkBF,kBAAlB,CAAP,CAA6ClB,aAA7C,CAAP;AACD","sourcesContent":["import React, { Component } from \"react\";\nimport AuthService from \"./AuthService.js\";\nimport Login from \"../Components/Login/LoginAdmin.js\";\nimport Loading from \"../Components/libs/PageLoader/fbloader.js\";\nimport { setRole } from \"../redux/actions\";\nimport { connect } from \"react-redux\";\nimport Network from \"./Network\";\nexport default function withAuth(AuthComponent) {\n  const Auth = new AuthService();\n  const api = new Network();\n  class Authenticated extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        isLogin: false,\n        isLoading: false,\n        classHide: \"hideInAuth\",\n      };\n      this.checkLogin = this.checkLogin.bind(this);\n    }\n    async checkLogin() {\n      // console.log(\"ISLOGIN\", Auth.loggedIn());\n      try {\n        this.setState({\n          isLoading: true,\n        });\n        let role = await Auth.loggedIn();\n        if (role) {\n          // console.log(\"auth: \", role)\n          await this.props.setRole(role);\n          this.setState({ isLogin: true });\n        } else {\n          this.setState({ isLogin: false });\n        }\n        setTimeout(() => {\n          this.setState({\n            isLoading: false,\n            classHide: \"\",\n          });\n        }, 100);\n      } catch (error) {\n        console.log(\"err in with auth: \", error);\n      }\n    }\n\n    componentDidMount() {\n      \n      this.checkLogin();\n    }\n\n    render() {\n      return (\n        <div>\n          {this.state.isLoading ? <Loading /> : null}\n          <div className={`with_auth_div ${this.state.classHide}`}>\n            {/* <Login {...this.props} auth={Auth} /> */}\n            {!this.state.isLogin ? (\n              <Login {...this.props} auth={Auth} />\n            ) : (\n              <AuthComponent {...this.props} auth={Auth} />\n            )}\n          </div>\n        </div>\n      );\n    }\n  }\n  const mapDispatchToProps = (dispatch) => {\n    return {\n      setRole: (role) => dispatch(setRole(role)),\n    };\n  };\n  const mapStateToProps = (state, ownProps) => {\n    return {};\n  };\n  return connect(mapStateToProps, mapDispatchToProps)(Authenticated);\n}\n"]},"metadata":{},"sourceType":"module"}