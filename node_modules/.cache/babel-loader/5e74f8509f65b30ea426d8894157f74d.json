{"ast":null,"code":"import { __rest } from \"tslib\";\nimport React, { createContext, useContext, useCallback } from 'react';\n/*\ncreateTheme is used to create a set of Providers and Consumers for theming components.\n- Takes a default theme function; this theme function gets a set of props, and returns tokens\n   based on those props. An example of this default theme function is one that produces the standard\n   appearance of the component\n- Returns two things - a Provider that allow for additional themes to be applied, and a Consumer\n   that can get the current theme and fetch it.\n*/\n\nexport function createTheme(defaultGetTokens) {\n  var emptyThemeFn = function (getTokens, props) {\n    return getTokens(props);\n  };\n  /* Internally, Theme uses React Context, with internal providers and consumers.\n     The React Context passes only a function that gets props, and turns them into tokens. This\n        function gets mixed as more Providers with their own themes are added. This mixed function\n        is ultimately picked up by Consumers, which implement a context consumer internally to fetch\n        the theme. */\n\n\n  var ThemeContext = createContext(defaultGetTokens); // The Theme Consumer takes a function as its child - this function takes tokens, and the\n  // return value is generally a set of nodes with the tokens applied appropriately.\n\n  function Consumer(props) {\n    var children = props.children,\n        themeProps = __rest(props, [\"children\"]);\n\n    var theme = useContext(ThemeContext);\n    var themeFn = theme || emptyThemeFn; // @ts-ignore See issue for more info: https://github.com/Microsoft/TypeScript/issues/10727\n    // Argument of type 'Pick<ThemeProps & { children: (tokens: ThemeTokens) => ReactNode; }, Exclude<keyof ThemeProps, \"children\">>' is not assignable to parameter of type 'ThemeProps'.ts(2345)\n\n    var tokens = themeFn(themeProps); // We add a fragment to ensure we don't break people upgrading.\n    // Previously they may have been able to pass in undefined without things blowing up.\n\n    return React.createElement(React.Fragment, null, children(tokens));\n  }\n  /* The Theme Provider takes regular nodes as its child, but also takes a *theme function*\n     - The theme function takes a set of props, as well as a function (getTokens) that can\n        turn props into tokens.\n     - The getTokens function isn't called immediately - instead the props are passed\n        through a mix of parent theming functions\n     Children of this provider will receive this mixed theme\n  */\n\n\n  function Provider(props) {\n    var themeFn = useContext(ThemeContext);\n    var valueFn = props.value || emptyThemeFn;\n    var mixedFn = useCallback(function (themeProps) {\n      return valueFn(themeFn, themeProps);\n    }, [themeFn, valueFn]);\n    return React.createElement(ThemeContext.Provider, {\n      value: mixedFn\n    }, props.children);\n  }\n\n  return {\n    Consumer: Consumer,\n    Provider: Provider\n  };\n}","map":{"version":3,"sources":["../../../src/utils/createTheme.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAP,IACE,aADF,EAGE,UAHF,EAIE,WAJF,QAMO,OANP;AAaA;;;;;;;;;AAQA,OAAM,SAAU,WAAV,CACJ,gBADI,EACgD;AAYpD,MAAM,YAAY,GAAuC,UAAC,SAAD,EAAY,KAAZ,EAAiB;AACxE,WAAA,SAAS,CAAC,KAAD,CAAT;AAAgB,GADlB;AAGA;;;;;;;AAKA,MAAM,YAAY,GAAG,aAAa,CAAC,gBAAD,CAAlC,CApBoD,CAsBpD;AACA;;AACA,WAAS,QAAT,CACE,KADF,EACsE;AAE5D,QAAA,QAAQ,GAAoB,KAAK,CAAzB,QAAR;AAAA,QAAa,UAAU,GAAA,MAAA,CAAK,KAAL,EAAzB,CAAA,UAAA,CAAyB,CAAvB;;AACR,QAAM,KAAK,GAAG,UAAU,CAAC,YAAD,CAAxB;AACA,QAAM,OAAO,GAAG,KAAK,IAAI,YAAzB,CAJoE,CAKpE;AACA;;AACA,QAAM,MAAM,GAAG,OAAO,CAAC,UAAD,CAAtB,CAPoE,CAQpE;AACA;;AACA,WAAO,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EAAG,QAAQ,CAAC,MAAD,CAAX,CAAP;AACD;AAED;;;;;;;;;AAOA,WAAS,QAAT,CAAkB,KAAlB,EAGC;AACC,QAAM,OAAO,GAAG,UAAU,CAAC,YAAD,CAA1B;AACA,QAAM,OAAO,GAAG,KAAK,CAAC,KAAN,IAAe,YAA/B;AACA,QAAM,OAAO,GAAG,WAAW,CACzB,UAAC,UAAD,EAAuB;AAAK,aAAA,OAAO,CAAC,OAAD,EAAP,UAAO,CAAP;AAA4B,KAD/B,EAEzB,CAAC,OAAD,EAAU,OAAV,CAFyB,CAA3B;AAKA,WACE,KAAA,CAAA,aAAA,CAAC,YAAY,CAAC,QAAd,EAAsB;AAAC,MAAA,KAAK,EAAE;AAAR,KAAtB,EACG,KAAK,CAAC,QADT,CADF;AAKD;;AAED,SAAO;AAAE,IAAA,QAAQ,EAAA,QAAV;AAAY,IAAA,QAAQ,EAAA;AAApB,GAAP;AACD","sourceRoot":"","sourcesContent":["import { __rest } from \"tslib\";\nimport React, { createContext, useContext, useCallback, } from 'react';\n/*\ncreateTheme is used to create a set of Providers and Consumers for theming components.\n- Takes a default theme function; this theme function gets a set of props, and returns tokens\n   based on those props. An example of this default theme function is one that produces the standard\n   appearance of the component\n- Returns two things - a Provider that allow for additional themes to be applied, and a Consumer\n   that can get the current theme and fetch it.\n*/\nexport function createTheme(defaultGetTokens) {\n    var emptyThemeFn = function (getTokens, props) {\n        return getTokens(props);\n    };\n    /* Internally, Theme uses React Context, with internal providers and consumers.\n       The React Context passes only a function that gets props, and turns them into tokens. This\n          function gets mixed as more Providers with their own themes are added. This mixed function\n          is ultimately picked up by Consumers, which implement a context consumer internally to fetch\n          the theme. */\n    var ThemeContext = createContext(defaultGetTokens);\n    // The Theme Consumer takes a function as its child - this function takes tokens, and the\n    // return value is generally a set of nodes with the tokens applied appropriately.\n    function Consumer(props) {\n        var children = props.children, themeProps = __rest(props, [\"children\"]);\n        var theme = useContext(ThemeContext);\n        var themeFn = theme || emptyThemeFn;\n        // @ts-ignore See issue for more info: https://github.com/Microsoft/TypeScript/issues/10727\n        // Argument of type 'Pick<ThemeProps & { children: (tokens: ThemeTokens) => ReactNode; }, Exclude<keyof ThemeProps, \"children\">>' is not assignable to parameter of type 'ThemeProps'.ts(2345)\n        var tokens = themeFn(themeProps);\n        // We add a fragment to ensure we don't break people upgrading.\n        // Previously they may have been able to pass in undefined without things blowing up.\n        return React.createElement(React.Fragment, null, children(tokens));\n    }\n    /* The Theme Provider takes regular nodes as its child, but also takes a *theme function*\n       - The theme function takes a set of props, as well as a function (getTokens) that can\n          turn props into tokens.\n       - The getTokens function isn't called immediately - instead the props are passed\n          through a mix of parent theming functions\n       Children of this provider will receive this mixed theme\n    */\n    function Provider(props) {\n        var themeFn = useContext(ThemeContext);\n        var valueFn = props.value || emptyThemeFn;\n        var mixedFn = useCallback(function (themeProps) { return valueFn(themeFn, themeProps); }, [themeFn, valueFn]);\n        return (React.createElement(ThemeContext.Provider, { value: mixedFn }, props.children));\n    }\n    return { Consumer: Consumer, Provider: Provider };\n}\n//# sourceMappingURL=createTheme.js.map"]},"metadata":{},"sourceType":"module"}