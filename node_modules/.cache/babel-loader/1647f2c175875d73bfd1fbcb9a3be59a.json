{"ast":null,"code":"var _jsxFileName = \"/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/Menu/DrawerProfile.js\";\nimport React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport \"./style.css\";\nimport moment from \"moment\";\nimport Wrapper from \"../common/Wrapper.js\";\nimport Network from \"../../Service/Network\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport axios from \"axios\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { defaultAva, domainServer } from \"../../utils/config.js\";\nconst api = new Network();\n\nclass DrawerProfile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderNotiRow = (index, noti, forwardNoti) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        className: \"navi-item rounded\",\n        style: !noti.status ? {\n          backgroundColor: \"#e1f0ff\"\n        } : null,\n        onClick: forwardNoti.bind(this, noti.type, noti.content.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"navi-link rounded\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"symbol symbol-50 mr-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"symbol-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }\n      }, this.renderNotiIcon(noti))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"navi-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"font-weight-bold font-size-lg mess_noti_cs\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }\n      }, noti.content.message), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-muted content_title_noti\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }\n      }, noti.content.title), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"time_noti text-muted\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }\n      }, moment(noti.createdAt).format(\"hh:mm a DD/MM/YYYY\")))));\n    };\n\n    this.getNoti = () => {\n      this.setState({\n        isNextPageLoading: true\n      }, async () => {\n        const response = await api.get(`/api/admin/notification?pageSize=${this.state.pageSize}&pageNumber=${this.state.pageNumber}`);\n\n        if (response) {\n          this.setState(state => ({\n            total: response.data.total,\n            hasNextPage: [...state.notification, ...response.data.list].length < response.data.total,\n            isNextPageLoading: false,\n            notification: [...state.notification, ...response.data.list],\n            pageNumber: state.pageNumber + 1\n          }));\n        }\n      });\n    };\n\n    this.onScroll = e => {\n      // offsetHeight chieu cao cua div TaskList\n      // scrollHeight chieu cao thuc cua scroll div\n      // console.log(e.target.scrollTop + this.scrollCol.offsetHeight);\n      // console.log(this.scrollCol.scrollHeight);\n      if (e.target.scrollTop + this.scrollCol.offsetHeight == this.scrollCol.scrollHeight) {\n        console.log(\"load\");\n        this.getDataNoti();\n      }\n    };\n\n    this.state = {\n      hasNextPage: true,\n      isNextPageLoading: false,\n      notification: [],\n      pageSize: 12,\n      pageNumber: 1,\n      total: 0\n    };\n    this.onChangeUploadHandler = this.onChangeUploadHandler.bind(this);\n    this.redirectProfile = this.redirectProfile.bind(this);\n    this.forwardNoti = this.forwardNoti.bind(this);\n    this.getNoti = this.getNoti.bind(this);\n    this.renderNotiRow = this.renderNotiRow.bind(this);\n    this.scrollCol = null;\n  } // Render an item or a loading indicator.\n\n\n  renderNotiIcon(noti) {\n    let icon = /*#__PURE__*/React.createElement(\"i\", {\n      className: \"flaticon-notepad text-primary icon-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 16\n      }\n    });\n    console.log(noti.type);\n\n    switch (noti.type) {\n      case \"assignJob\":\n        icon = /*#__PURE__*/React.createElement(\"i\", {\n          className: \"flaticon-notepad text-primary icon-lg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 16\n          }\n        });\n        break;\n\n      case \"assignCard\":\n        icon = /*#__PURE__*/React.createElement(\"i\", {\n          className: \"flaticon-bell text-success icon-lg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 16\n          }\n        });\n        break;\n\n      case \"assignTask\":\n        icon = /*#__PURE__*/React.createElement(\"i\", {\n          className: \"flaticon-calendar-1 text-success icon-lg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 16\n          }\n        });\n        break;\n\n      case \"jobOverTime\":\n        icon = /*#__PURE__*/React.createElement(\"i\", {\n          className: \"flaticon-safe-shield-protection text-warning icon-lg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 11\n          }\n        });\n        break;\n\n      default:\n        icon = /*#__PURE__*/React.createElement(\"i\", {\n          className: \"flaticon-notepad text-primary icon-lg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 16\n          }\n        });\n        break;\n    }\n\n    return icon;\n  }\n\n  markAllNotiRead() {\n    const newNotification = this.state.notification.map((noti, index) => {\n      return { ...noti,\n        status: true\n      };\n    });\n    this.setState({\n      notification: newNotification\n    });\n  }\n\n  receiveNewNoti(newNoti) {\n    this.setState(state => {\n      return {\n        notification: [newNoti, ...state.notification]\n      };\n    });\n  }\n\n  async getDataNoti() {\n    try {\n      const response = await api.get(`/api/admin/notification?pageSize=${this.state.pageSize}&pageNumber=${this.state.pageNumber}`);\n\n      if (response) {\n        this.setState(state => ({\n          total: response.data.total,\n          hasNextPage: [...state.notification, ...response.data.list].length < response.data.total,\n          notification: [...state.notification, ...response.data.list],\n          pageNumber: state.pageNumber + 1\n        }));\n      }\n    } catch (err) {\n      console.log(\"err while get noti\", err);\n    }\n  }\n\n  forwardNoti(type, id) {\n    if (type == \"assignJob\") {\n      this.props.onHide();\n      this.props.history.push(`/job-detail/${id}`);\n    } else if (type == \"assignCard\") {\n      this.props.onHide();\n      this.props.history.push(`/board`);\n    } else if (type == \"assignTask\") {\n      this.props.onHide();\n      this.props.history.push(`/`);\n    } else if (type == \"jobOverTime\") {\n      this.props.onHide();\n      this.props.history.push(`/job-detail/${id}`);\n    }\n  }\n\n  async onChangeUploadHandler(event) {\n    try {\n      let file_size = event.target.files[0].size; // console.log(file_size)\n\n      if (file_size > 3145728) {\n        toast.error(\"Image file size too big!\", {\n          position: toast.POSITION.BOTTOM_RIGHT\n        });\n        return false;\n      }\n\n      var formData = new FormData();\n      formData.append(\"linkAvatar\", event.target.files[0]);\n      const request_header = api.getHeaderUpload();\n      const request_server = api.domain;\n      var self = this;\n      const config = {\n        onUploadProgress: function (progressEvent) {\n          var percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          self.setState({\n            uploadProcess: percentCompleted\n          });\n        }\n      };\n      config.headers = request_header.headers;\n      this.setState({\n        loadingUpload: true\n      });\n      axios.post(request_server + \"/api/upload/avatar\", formData, config).then(res => {\n        if (res) {\n          console.log(res.data.data.avatar);\n          console.log(request_server + \"/\" + res.data.data.avatar);\n          self.props.doneUpload(res.data.data.avatar); // var current_data = this.state.data;\n          // current_data.avatar = res.data.data.avatar;\n          // this.avatar_slider.slickGoTo(0, false);\n          // MidleService.reloadUserFunc();\n          // this.setState({\n          //   loadingUpload: false,\n          //   uploadProcess: null,\n          //   data: current_data,\n          // });\n        } else {\n          this.setState({\n            loadingUpload: false\n          });\n          toast.error(\"Something went wrong please try again later!\", {\n            position: toast.POSITION.BOTTOM_RIGHT\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          loadingUpload: false\n        });\n        toast.error(\"Something went wrong please try again later!\", {\n          position: toast.POSITION.BOTTOM_RIGHT\n        });\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  redirectProfile(id) {\n    this.props.onHide();\n\n    if (this.props.hideMenuResponsive) {\n      this.props.hideMenuResponsive();\n    }\n\n    this.props.history.push(`/profile/${id}`);\n  }\n\n  componentDidMount() {\n    this.getDataNoti();\n    this.scrollCol = document.getElementById(\"loadmore_noti\");\n  }\n\n  componentDidUpdate() {\n    this.scrollCol = document.getElementById(\"loadmore_noti\");\n  }\n\n  render() {\n    const data = this.props.data;\n    const notification = this.state.notification;\n    const {\n      hasNextPage,\n      isNextPageLoading\n    } = this.state;\n    console.log(this.state.hasNextPage);\n    return /*#__PURE__*/React.createElement(Drawer, {\n      anchor: \"left\",\n      open: this.props.show,\n      onClose: this.props.onHide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" p-10 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"offcanvas-header d-flex align-items-center justify-content-between pb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"font-weight-bold m-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }, \"User Profile\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn btn-xs btn-icon btn-light btn-hover-primary\",\n      onClick: this.props.onHide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"ki ki-close icon-xs text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"offcanvas-content pr-5 mr-n5 scroll \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"symbol symbol-100 mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"symbol-label symbol-label-cs-profile\",\n      style: {\n        backgroundImage: data.linkAvatar ? `url(\"${domainServer + \"/\" + data.linkAvatar}\")` : `url(\"${defaultAva}\")`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"symbol-badge bg-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-edit--profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      id: \"imageUpload\",\n      accept: \".png, .jpg, .jpeg\",\n      onChange: this.onChangeUploadHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label_cs_up_ava\",\n      htmlFor: \"imageUpload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"flaticon2-pen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.redirectProfile.bind(this, data.id),\n      className: \"font-weight-bold font-size-h5 text-dark-75 text-hover-primary\",\n      title: \"View details\",\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }, data.name ? data.name : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-muted mt-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }\n    }, data.Role ? data.Role.name : null, \" \", data.Team ? data.Team.name : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"navi mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      className: \"navi-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"navi-link p-0 pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"navi-icon mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"svg-icon svg-icon-lg svg-icon-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      width: \"24px\",\n      height: \"24px\",\n      viewBox: \"0 0 24 24\",\n      version: \"1.1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      stroke: \"none\",\n      strokeWidth: 1,\n      fill: \"none\",\n      fillRule: \"evenodd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      x: 0,\n      y: 0,\n      width: 24,\n      height: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M21,12.0829584 C20.6747915,12.0283988 20.3407122,12 20,12 C16.6862915,12 14,14.6862915 14,18 C14,18.3407122 14.0283988,18.6747915 14.0829584,19 L5,19 C3.8954305,19 3,18.1045695 3,17 L3,8 C3,6.8954305 3.8954305,6 5,6 L19,6 C20.1045695,6 21,6.8954305 21,8 L21,12.0829584 Z M18.1444251,7.83964668 L12,11.1481833 L5.85557487,7.83964668 C5.4908718,7.6432681 5.03602525,7.77972206 4.83964668,8.14442513 C4.6432681,8.5091282 4.77972206,8.96397475 5.14442513,9.16035332 L11.6444251,12.6603533 C11.8664074,12.7798822 12.1335926,12.7798822 12.3555749,12.6603533 L18.8555749,9.16035332 C19.2202779,8.96397475 19.3567319,8.5091282 19.1603533,8.14442513 C18.9639747,7.77972206 18.5091282,7.6432681 18.1444251,7.83964668 Z\",\n      fill: \"#000000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 31\n      }\n    }), /*#__PURE__*/React.createElement(\"circle\", {\n      fill: \"#000000\",\n      opacity: \"0.3\",\n      cx: \"19.5\",\n      cy: \"17.5\",\n      r: \"2.5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 31\n      }\n    }))))), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"navi-text text-muted text-hover-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 23\n      }\n    }, data.email ? data.email : null))), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.props.logout,\n      className: \"btn btn-sm btn-light-primary font-weight-bolder py-2 px-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 19\n      }\n    }, \"Sign Out\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"separator separator-dashed mt-8 mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 13\n      }\n    }, \"Notifications\"), /*#__PURE__*/React.createElement(\"div\", {\n      onScroll: this.onScroll,\n      className: \"navi navi-spacer-x-0 navi_cs\",\n      id: \"loadmore_noti\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 13\n      }\n    }, this.state.notification.map((noti, index) => {\n      return this.renderNotiRow(index, noti, this.forwardNoti);\n    }), this.state.hasNextPage ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        marginBottom: \"5px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn btn-light btn-shadow btn-sm font-weight-bold font-size-sm spinner spinner-primary spinner-left\",\n      style: {\n        cursor: \"wait\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 19\n      }\n    }, \"Please wait...\")) : null))));\n  }\n\n}\n\nexport default DrawerProfile;","map":{"version":3,"sources":["/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/Menu/DrawerProfile.js"],"names":["React","Component","NavLink","moment","Wrapper","Network","Drawer","axios","ToastContainer","toast","defaultAva","domainServer","api","DrawerProfile","constructor","props","renderNotiRow","index","noti","forwardNoti","status","backgroundColor","bind","type","content","id","renderNotiIcon","message","title","createdAt","format","getNoti","setState","isNextPageLoading","response","get","state","pageSize","pageNumber","total","data","hasNextPage","notification","list","length","onScroll","e","target","scrollTop","scrollCol","offsetHeight","scrollHeight","console","log","getDataNoti","onChangeUploadHandler","redirectProfile","icon","markAllNotiRead","newNotification","map","receiveNewNoti","newNoti","err","onHide","history","push","event","file_size","files","size","error","position","POSITION","BOTTOM_RIGHT","formData","FormData","append","request_header","getHeaderUpload","request_server","domain","self","config","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","uploadProcess","headers","loadingUpload","post","then","res","avatar","doneUpload","catch","hideMenuResponsive","componentDidMount","document","getElementById","componentDidUpdate","render","show","backgroundImage","linkAvatar","cursor","name","Role","Team","email","logout","display","justifyContent","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport \"./style.css\";\nimport moment from \"moment\";\nimport Wrapper from \"../common/Wrapper.js\";\nimport Network from \"../../Service/Network\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport axios from \"axios\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { defaultAva, domainServer } from \"../../utils/config.js\";\n\nconst api = new Network();\n\nclass DrawerProfile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasNextPage: true,\n      isNextPageLoading: false,\n      notification: [],\n      pageSize: 12,\n      pageNumber: 1,\n      total: 0,\n    };\n    this.onChangeUploadHandler = this.onChangeUploadHandler.bind(this);\n    this.redirectProfile = this.redirectProfile.bind(this);\n    this.forwardNoti = this.forwardNoti.bind(this);\n    this.getNoti = this.getNoti.bind(this);\n    this.renderNotiRow = this.renderNotiRow.bind(this);\n    this.scrollCol = null;\n  }\n  // Render an item or a loading indicator.\n  renderNotiIcon(noti) {\n    let icon = <i className=\"flaticon-notepad text-primary icon-lg\"></i>;\n    console.log(noti.type);\n    switch (noti.type) {\n      case \"assignJob\":\n        icon = <i className=\"flaticon-notepad text-primary icon-lg\"></i>;\n        break;\n      case \"assignCard\":\n        icon = <i className=\"flaticon-bell text-success icon-lg\" />;\n        break;\n      case \"assignTask\":\n        icon = <i className=\"flaticon-calendar-1 text-success icon-lg\" />;\n        break;\n      case \"jobOverTime\":\n        icon = (\n          <i className=\"flaticon-safe-shield-protection text-warning icon-lg\" />\n        );\n        break;\n      default:\n        icon = <i className=\"flaticon-notepad text-primary icon-lg\"></i>;\n        break;\n    }\n    return icon;\n  }\n  renderNotiRow = (index, noti, forwardNoti) => {\n    return (\n      <div\n        key={index}\n        className=\"navi-item rounded\"\n        style={!noti.status ? { backgroundColor: \"#e1f0ff\" } : null}\n        onClick={forwardNoti.bind(this, noti.type, noti.content.id)}\n      >\n        <div className=\"navi-link rounded\">\n          <div className=\"symbol symbol-50 mr-3\">\n            <div className=\"symbol-label\">{this.renderNotiIcon(noti)}</div>\n          </div>\n          <div className=\"navi-text\">\n            <div className=\"font-weight-bold font-size-lg mess_noti_cs\">\n              {noti.content.message}\n            </div>\n            <div className=\"text-muted content_title_noti\">\n              {noti.content.title}\n            </div>\n            <div className=\"time_noti text-muted\">\n              {moment(noti.createdAt).format(\"hh:mm a DD/MM/YYYY\")}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n  markAllNotiRead() {\n    const newNotification = this.state.notification.map((noti, index) => {\n      return { ...noti, status: true };\n    });\n    this.setState({\n      notification: newNotification,\n    });\n  }\n  receiveNewNoti(newNoti) {\n    this.setState((state) => {\n      return {\n        notification: [newNoti, ...state.notification],\n      };\n    });\n  }\n  getNoti = () => {\n    this.setState({ isNextPageLoading: true }, async () => {\n      const response = await api.get(\n        `/api/admin/notification?pageSize=${this.state.pageSize}&pageNumber=${this.state.pageNumber}`\n      );\n      if (response) {\n        this.setState((state) => ({\n          total: response.data.total,\n          hasNextPage:\n            [...state.notification, ...response.data.list].length <\n            response.data.total,\n          isNextPageLoading: false,\n          notification: [...state.notification, ...response.data.list],\n          pageNumber: state.pageNumber + 1,\n        }));\n      }\n    });\n  };\n  async getDataNoti() {\n    try {\n      const response = await api.get(\n        `/api/admin/notification?pageSize=${this.state.pageSize}&pageNumber=${this.state.pageNumber}`\n      );\n      if (response) {\n        this.setState((state) => ({\n          total: response.data.total,\n          hasNextPage:\n            [...state.notification, ...response.data.list].length <\n            response.data.total,\n          notification: [...state.notification, ...response.data.list],\n          pageNumber: state.pageNumber + 1,\n        }));\n      }\n    } catch (err) {\n      console.log(\"err while get noti\", err);\n    }\n  }\n  forwardNoti(type, id) {\n    if (type == \"assignJob\") {\n      this.props.onHide();\n      this.props.history.push(`/job-detail/${id}`);\n    } else if (type == \"assignCard\") {\n      this.props.onHide();\n      this.props.history.push(`/board`);\n    } else if (type == \"assignTask\") {\n      this.props.onHide();\n      this.props.history.push(`/`);\n    } else if (type == \"jobOverTime\") {\n      this.props.onHide();\n      this.props.history.push(`/job-detail/${id}`);\n    }\n  }\n  async onChangeUploadHandler(event) {\n    try {\n      let file_size = event.target.files[0].size;\n      // console.log(file_size)\n      if (file_size > 3145728) {\n        toast.error(\"Image file size too big!\", {\n          position: toast.POSITION.BOTTOM_RIGHT,\n        });\n        return false;\n      }\n      var formData = new FormData();\n      formData.append(\"linkAvatar\", event.target.files[0]);\n\n      const request_header = api.getHeaderUpload();\n      const request_server = api.domain;\n      var self = this;\n      const config = {\n        onUploadProgress: function (progressEvent) {\n          var percentCompleted = Math.round(\n            (progressEvent.loaded * 100) / progressEvent.total\n          );\n          self.setState({ uploadProcess: percentCompleted });\n        },\n      };\n      config.headers = request_header.headers;\n      this.setState({ loadingUpload: true });\n      axios\n        .post(request_server + \"/api/upload/avatar\", formData, config)\n        .then((res) => {\n          if (res) {\n            console.log(res.data.data.avatar);\n            console.log(request_server + \"/\" + res.data.data.avatar);\n            self.props.doneUpload(res.data.data.avatar);\n            // var current_data = this.state.data;\n            // current_data.avatar = res.data.data.avatar;\n            // this.avatar_slider.slickGoTo(0, false);\n            // MidleService.reloadUserFunc();\n            // this.setState({\n            //   loadingUpload: false,\n            //   uploadProcess: null,\n            //   data: current_data,\n            // });\n          } else {\n            this.setState({ loadingUpload: false });\n            toast.error(\"Something went wrong please try again later!\", {\n              position: toast.POSITION.BOTTOM_RIGHT,\n            });\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          this.setState({ loadingUpload: false });\n          toast.error(\"Something went wrong please try again later!\", {\n            position: toast.POSITION.BOTTOM_RIGHT,\n          });\n        });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  redirectProfile(id) {\n    this.props.onHide();\n    if (this.props.hideMenuResponsive) {\n      this.props.hideMenuResponsive();\n    }\n    this.props.history.push(`/profile/${id}`);\n  }\n  componentDidMount() {\n    this.getDataNoti();\n    this.scrollCol = document.getElementById(\"loadmore_noti\");\n  }\n  componentDidUpdate() {\n    this.scrollCol = document.getElementById(\"loadmore_noti\");\n  }\n  onScroll = (e) => {\n    // offsetHeight chieu cao cua div TaskList\n    // scrollHeight chieu cao thuc cua scroll div\n    // console.log(e.target.scrollTop + this.scrollCol.offsetHeight);\n    // console.log(this.scrollCol.scrollHeight);\n    if (\n      e.target.scrollTop + this.scrollCol.offsetHeight ==\n      this.scrollCol.scrollHeight\n    ) {\n      console.log(\"load\");\n      this.getDataNoti();\n    }\n  };\n  render() {\n    const data = this.props.data;\n    const notification = this.state.notification;\n    const { hasNextPage, isNextPageLoading } = this.state;\n    console.log(this.state.hasNextPage);\n    return (\n      <Drawer\n        anchor={\"left\"}\n        open={this.props.show}\n        onClose={this.props.onHide}\n      >\n        <div className=\" p-10 \">\n          <div className=\"offcanvas-header d-flex align-items-center justify-content-between pb-5\">\n            <h3 className=\"font-weight-bold m-0\">User Profile</h3>\n            <div\n              className=\"btn btn-xs btn-icon btn-light btn-hover-primary\"\n              onClick={this.props.onHide}\n            >\n              <i className=\"ki ki-close icon-xs text-muted\" />\n            </div>\n          </div>\n          <div className=\"offcanvas-content pr-5 mr-n5 scroll \">\n            <div className=\"d-flex align-items-center mt-5\">\n              <div className=\"symbol symbol-100 mr-5\">\n                <div\n                  className=\"symbol-label symbol-label-cs-profile\"\n                  style={{\n                    backgroundImage: data.linkAvatar\n                      ? `url(\"${domainServer + \"/\" + data.linkAvatar}\")`\n                      : `url(\"${defaultAva}\")`,\n                  }}\n                />\n                <i className=\"symbol-badge bg-success\" />\n                <div className=\"avatar-edit--profile\">\n                  <input\n                    type=\"file\"\n                    id=\"imageUpload\"\n                    accept=\".png, .jpg, .jpeg\"\n                    onChange={this.onChangeUploadHandler}\n                  />\n                  <label className=\"label_cs_up_ava\" htmlFor=\"imageUpload\">\n                    <i className=\"flaticon2-pen\"></i>\n                  </label>\n                </div>\n              </div>\n              <div className=\"d-flex flex-column\">\n                <div\n                  onClick={this.redirectProfile.bind(this, data.id)}\n                  className=\"font-weight-bold font-size-h5 text-dark-75 text-hover-primary\"\n                  title=\"View details\"\n                  style={{ cursor: \"pointer\" }}\n                >\n                  {data.name ? data.name : null}\n                </div>\n                <div className=\"text-muted mt-1\">\n                  {data.Role ? data.Role.name : null}{\" \"}\n                  {data.Team ? data.Team.name : null}\n                </div>\n\n                <div className=\"navi mt-2\">\n                  <a href=\"#\" className=\"navi-item\">\n                    <span className=\"navi-link p-0 pb-2\">\n                      <span className=\"navi-icon mr-1\">\n                        <span className=\"svg-icon svg-icon-lg svg-icon-primary\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n                            width=\"24px\"\n                            height=\"24px\"\n                            viewBox=\"0 0 24 24\"\n                            version=\"1.1\"\n                          >\n                            <g\n                              stroke=\"none\"\n                              strokeWidth={1}\n                              fill=\"none\"\n                              fillRule=\"evenodd\"\n                            >\n                              <rect x={0} y={0} width={24} height={24} />\n                              <path\n                                d=\"M21,12.0829584 C20.6747915,12.0283988 20.3407122,12 20,12 C16.6862915,12 14,14.6862915 14,18 C14,18.3407122 14.0283988,18.6747915 14.0829584,19 L5,19 C3.8954305,19 3,18.1045695 3,17 L3,8 C3,6.8954305 3.8954305,6 5,6 L19,6 C20.1045695,6 21,6.8954305 21,8 L21,12.0829584 Z M18.1444251,7.83964668 L12,11.1481833 L5.85557487,7.83964668 C5.4908718,7.6432681 5.03602525,7.77972206 4.83964668,8.14442513 C4.6432681,8.5091282 4.77972206,8.96397475 5.14442513,9.16035332 L11.6444251,12.6603533 C11.8664074,12.7798822 12.1335926,12.7798822 12.3555749,12.6603533 L18.8555749,9.16035332 C19.2202779,8.96397475 19.3567319,8.5091282 19.1603533,8.14442513 C18.9639747,7.77972206 18.5091282,7.6432681 18.1444251,7.83964668 Z\"\n                                fill=\"#000000\"\n                              />\n                              <circle\n                                fill=\"#000000\"\n                                opacity=\"0.3\"\n                                cx=\"19.5\"\n                                cy=\"17.5\"\n                                r=\"2.5\"\n                              />\n                            </g>\n                          </svg>\n                        </span>\n                      </span>\n                      <span className=\"navi-text text-muted text-hover-primary\">\n                        {data.email ? data.email : null}\n                      </span>\n                    </span>\n                  </a>\n                  <div\n                    onClick={this.props.logout}\n                    className=\"btn btn-sm btn-light-primary font-weight-bolder py-2 px-5\"\n                  >\n                    Sign Out\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"separator separator-dashed mt-8 mb-5\" />\n            <h5 className=\"mb-5\">Notifications</h5>\n            <div\n              onScroll={this.onScroll}\n              className=\"navi navi-spacer-x-0 navi_cs\"\n              id=\"loadmore_noti\"\n            >\n              {/* <Wrapper\n                hasNextPage={hasNextPage}\n                isNextPageLoading={isNextPageLoading}\n                items={this.state.notification}\n                loadNextPage={this.getNoti}\n                renderNotiRow={this.renderNotiRow}\n                forwardNoti={this.forwardNoti}\n              /> */}\n              {this.state.notification.map((noti, index) => {\n                return this.renderNotiRow(index, noti, this.forwardNoti);\n              })}\n              {this.state.hasNextPage ? (\n                <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    marginBottom: \"5px\",\n                  }}\n                >\n                  <div\n                    className=\"btn btn-light btn-shadow btn-sm font-weight-bold font-size-sm spinner spinner-primary spinner-left\"\n                    style={{ cursor: \"wait\" }}\n                  >\n                    Please wait...\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          </div>\n        </div>\n      </Drawer>\n    );\n  }\n}\n\nexport default DrawerProfile;\n"]},"metadata":{},"sourceType":"module"}