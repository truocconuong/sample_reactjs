{"ast":null,"code":"var _jsxFileName = \"/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/Menu/PwaInstall.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\n\nfunction PwaInstall(props) {\n  const [supportsPWA, setSupportsPWA] = useState(false);\n  const [promptInstall, setPromptInstall] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [isIos, setIsIos] = useState(false);\n  useEffect(() => {\n    const ua = window.navigator.userAgent;\n    const webkit = !!ua.match(/WebKit/i);\n    const isIPad = !!ua.match(/iPad/i);\n    const isIPhone = !!ua.match(/iPhone/i);\n    const isIOS = isIPad || isIPhone;\n    const isSafari = isIOS && webkit && !ua.match(/CriOS/i);\n\n    if (isIOS || isSafari) {\n      setIsIos(true);\n      console.log(\"da vao day\");\n    }\n\n    const handler = e => {\n      e.preventDefault();\n      console.log(\"we are being triggered :D\");\n      setSupportsPWA(true);\n      setPromptInstall(e);\n    };\n\n    window.addEventListener(\"beforeinstallprompt\", handler);\n    return () => window.removeEventListener(\"transitionend\", handler);\n  }, []);\n\n  const onClick = evt => {\n    evt.preventDefault();\n\n    if (isIos) {\n      console.log(\"vao day roi\");\n      setShowPopup(true);\n      return;\n    }\n\n    if (!promptInstall) {\n      return;\n    }\n\n    promptInstall.prompt();\n  };\n\n  if (!supportsPWA) {}\n\n  const popup = /*#__PURE__*/React.createElement(Modal, {\n    size: \"sm\",\n    show: showPopup //showPopup\n    ,\n    onHide: () => setShowPopup(false),\n    centered: true,\n    bsPrefix: \"modal_pwa modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    bsPrefix: \"header_cs_modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"install_app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, \"Install App\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal_body_pwa\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Install this application on your homescreen for a better experience.\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"uk-text-small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Tap\", /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/img/share_icon.png\",\n    className: \"icon_share_ios\",\n    height: \"20\",\n    width: \"20\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }), \"then \\\"Add to Home Screen\\\"\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close_pwa_install\",\n    onClick: () => setShowPopup(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"Close\"));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, popup, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onClick,\n    className: \"row_icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrap_icon_menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-puzzle-piece hover_icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content_menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"Install App\")));\n}\n\nexport default PwaInstall;","map":{"version":3,"sources":["/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/Menu/PwaInstall.js"],"names":["React","useEffect","useState","Button","Modal","PwaInstall","props","supportsPWA","setSupportsPWA","promptInstall","setPromptInstall","showPopup","setShowPopup","isIos","setIsIos","ua","window","navigator","userAgent","webkit","match","isIPad","isIPhone","isIOS","isSafari","console","log","handler","e","preventDefault","addEventListener","removeEventListener","onClick","evt","prompt","popup"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\n\n\nfunction PwaInstall(props) {\n  const [supportsPWA, setSupportsPWA] = useState(false);\n  const [promptInstall, setPromptInstall] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [isIos, setIsIos] = useState(false);\n\n  useEffect(() => {\n    const ua = window.navigator.userAgent;\n    const webkit = !!ua.match(/WebKit/i);\n    const isIPad = !!ua.match(/iPad/i);\n    const isIPhone = !!ua.match(/iPhone/i);\n    const isIOS = isIPad || isIPhone;\n    const isSafari = isIOS && webkit && !ua.match(/CriOS/i);\n    if (isIOS || isSafari) {\n      setIsIos(true);\n      console.log(\"da vao day\");\n    }\n    const handler = (e) => {\n      e.preventDefault();\n      console.log(\"we are being triggered :D\");\n      setSupportsPWA(true);\n      setPromptInstall(e);\n    };\n    window.addEventListener(\"beforeinstallprompt\", handler);\n\n    return () => window.removeEventListener(\"transitionend\", handler);\n  }, []);\n  const onClick = (evt) => {\n    evt.preventDefault();\n    if (isIos) {\n      console.log(\"vao day roi\");\n      setShowPopup(true);\n      return;\n    }\n    if (!promptInstall) {\n      return;\n    }\n    promptInstall.prompt();\n  };\n  if (!supportsPWA) {\n  }\n  const popup = (\n    <Modal\n      size=\"sm\"\n      show={showPopup} //showPopup\n      onHide={() => setShowPopup(false)}\n      centered\n      bsPrefix=\"modal_pwa modal\"\n    >\n      <Modal.Header bsPrefix=\"header_cs_modal\">\n        <div className=\"install_app\">Install App</div>\n      </Modal.Header>\n      <div className=\"modal_body_pwa\">\n        <p>\n          Install this application on your homescreen for a better experience.\n        </p>\n        <p className=\"uk-text-small\">\n          Tap\n          <img\n            src=\"/img/share_icon.png\"\n            className=\"icon_share_ios\"\n            height=\"20\"\n            width=\"20\"\n          />\n          then &quot;Add to Home Screen&quot;\n        </p>\n      </div>\n      <div className=\"close_pwa_install\" onClick={() => setShowPopup(false)}>Close</div>\n      {/* <div className=\"modal-cus__right text-right\">\n        <button\n          type=\"reset\"\n          className=\"btn btn-small btn-secondary\"\n          onClick={() => setShowPopup(false)}\n        >\n          Ok\n        </button>\n      </div> */}\n    </Modal>\n  );\n\n  return (\n    <>\n      {popup}\n      <div onClick={onClick} className=\"row_icon\">\n        <div className=\"wrap_icon_menu\">\n          <i className=\"fa fa-puzzle-piece hover_icon\"></i>\n        </div>\n        <div className=\"content_menu\">Install App</div>\n      </div>\n    </>\n  );\n}\n\nexport default PwaInstall;\n"]},"metadata":{},"sourceType":"module"}