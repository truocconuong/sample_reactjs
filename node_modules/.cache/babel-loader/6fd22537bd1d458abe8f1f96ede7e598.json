{"ast":null,"code":"var _jsxFileName = \"/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/Dnd/Card.js\";\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { Button, Modal, Overlay } from \"react-bootstrap\";\nimport Popover from \"react-bootstrap/Popover\";\nimport { Button as ButtonPop, Popover as PopoverPop, PopoverHeader, PopoverBody } from 'reactstrap';\nimport Select from 'react-select';\nimport _ from 'lodash';\nimport \"./styles.css\";\nimport { connect } from \"react-redux\";\nimport roleName from '../../utils/const';\nimport { defaultAva, domainServer } from \"../../utils/config\";\nimport * as moment from 'moment';\nconst Container = styled.div`\n  margin-bottom: 8px;\n  border-radius: 3px;\n  box-shadow: 0 1px 0 rgba(9, 30, 66, 0.25);\n  border-radius: 2px;\n  padding: 6px 8px;\n  background-color: #fff;\n  font-family: \"Poppins\", sans-serif;\n`;\n\nconst setPaddingBottomMembers = length => {\n  let paddingBottom = 56;\n\n  if (length > 3) {\n    paddingBottom = 95;\n  }\n\n  return {\n    paddingBottom: `${paddingBottom}px`\n  };\n};\n\nclass Card extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleListBoard = () => {\n      this.setState({\n        userSelected: {},\n        showListBoard: !this.state.showListBoard\n      });\n    };\n\n    this.toggleAddMember = () => {\n      this.setState({\n        showListBoard: true,\n        showAddMember: !this.state.showAddMember\n      });\n    };\n\n    this.handleOnChangeUser = e => {\n      this.setState({\n        showListBoard: false,\n        userSelected: e\n      });\n    };\n\n    this.removeMemberToCard = (index, card_id, user_id) => {\n      console.log(\"da vao day\");\n      this.props.removeMemberToCard(card_id, user_id);\n      let currentIsOpenDeleteUserPop = this.state.isOpenDeleteUserPop;\n      currentIsOpenDeleteUserPop[index] = false;\n      this.setState({\n        isOpenDeleteUserPop: currentIsOpenDeleteUserPop\n      });\n    };\n\n    this.checkUserIsSelected = (users, user_id) => {\n      let isSelected = false;\n      isSelected = _.some(users, {\n        id: user_id\n      });\n      return isSelected;\n    };\n\n    this.showUserAnSelected = (usersTeam, userCard) => {\n      const users = _.cloneDeep(usersTeam);\n\n      for (const data of userCard) {\n        _.remove(users, user => user.value === data.id);\n      }\n\n      return users;\n    };\n\n    this.colorRandomSelected = () => {\n      const colors = ['label label-xl label-inline label-light-dark', 'label label-xl label-inline label-light-dark', 'label label-xl label-inline label-light-success', 'label label-xl label-inline label-light-danger', 'label label-xl label-inline label-light-success'];\n      const random = Math.floor(Math.random() * colors.length);\n      return colors[random];\n    };\n\n    this.toggleMember = (selected, index, card_id, user) => {\n      if (selected) {\n        // remove member\n        this.removeMemberToCard(index, card_id, user.value);\n      } else {\n        this.addMemberToCard(card_id, user); // add member\n      }\n    };\n\n    this.state = {\n      isOpenDeleteUserPop: new Array(10).fill(false),\n      showAddMember: false,\n      userSelected: {},\n      showListBoard: true\n    };\n    this.showInfoMember = [];\n    this.addMemberToCard = this.addMemberToCard.bind(this);\n    this.removeMemberToCard = this.removeMemberToCard.bind(this);\n  }\n\n  toggleDeleteUserPop(index) {\n    let self = this;\n    const isShow = this.state.isOpenDeleteUserPop[index];\n    let currentIsOpenDeleteUserPop = new Array(10).fill(false);\n    this.setState({\n      isOpenDeleteUserPop: currentIsOpenDeleteUserPop\n    }, function () {\n      currentIsOpenDeleteUserPop[index] = !isShow;\n      self.setState({\n        isOpenDeleteUserPop: currentIsOpenDeleteUserPop\n      });\n    });\n  }\n\n  addMemberToCard(card_id, user) {\n    const data = {\n      card_id,\n      content: {\n        id: user.value,\n        email: user.label,\n        name: user.name,\n        linkAvatar: user.linkAvatar\n      }\n    };\n    this.props.addMemberToCard(data);\n    this.toggleListBoard();\n    this.toggleAddMember();\n  }\n\n  render() {\n    const users = this.props.card.content.user;\n    const card = this.props.card.content;\n    let usersTeam = [];\n\n    if (!_.isEmpty(this.props.users)) {\n      usersTeam.push(...this.props.users);\n    }\n\n    return /*#__PURE__*/React.createElement(Draggable, {\n      draggableId: this.props.card.id,\n      index: this.props.index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }\n    }, provided => /*#__PURE__*/React.createElement(Container, Object.assign({}, provided.draggableProps, provided.dragHandleProps, {\n      ref: provided.innerRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PopoverPop, {\n      popperClassName: \"popover-modal-card\",\n      trigger: \"legacy\",\n      placement: \"bottom\",\n      isOpen: this.state.showAddMember,\n      target: `Popover${this.props.card.id}`,\n      toggle: this.toggleAddMember,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(PopoverBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"navi navi-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"navi-header font-weight-bold py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"font-size-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 23\n      }\n    }, \"Toggle member to card:\"), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"flaticon2-information icon-md text-muted\",\n      \"data-toggle\": \"tooltip\",\n      \"data-placement\": \"right\",\n      title: \"Click to learn more...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"navi-separator mb-3 opacity-70\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }), usersTeam.map((user, index) => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: index,\n        className: \"navi-item\",\n        onClick: () => this.toggleMember(this.checkUserIsSelected(users, user.value), index, this.props.card.id, user),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"navi-link navi-link-cus\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"navi-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: this.colorRandomSelected(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 31\n        }\n      }, user.name)), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"checkbox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        disabled: true,\n        readOnly: true,\n        type: \"checkbox\",\n        checked: this.checkUserIsSelected(users, user.value),\n        name: \"Checkboxes1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 31\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 31\n        }\n      }))));\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body_card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-custom gutter-b card-stretch mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 19\n      }\n    }, card.interview ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header ribbon ribbon-clip ribbon-right ribbon-ver-cus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 39\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ribbon-target\",\n      style: {\n        top: '14px',\n        height: '30px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"ribbon-inner bg-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-star text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 69\n      }\n    }))) : '', /*#__PURE__*/React.createElement(\"div\", {\n      style: setPaddingBottomMembers(users.length),\n      className: \"card-body card-body-trello pt-4\",\n      onClick: this.props.open_detail_card,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column card-header-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header__title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"text-dark font-weight-bold text-hover-primary font-size-h4 mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 31\n      }\n    }, card.name, \" \", card.nameJob)), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-muted font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }\n    }, moment(card.approachDate).format('DD/MM/YYYY')))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, card.nameJob), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb-7 card-content-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-dark-75 font-weight-bolder mr-2 set-with-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 29\n      }\n    }, \"Email:\"), /*#__PURE__*/React.createElement(\"a\", {\n      title: card.email,\n      className: \"text-muted text-hover-primary custom-dot-email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 29\n      }\n    }, card.email)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-cente my-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-dark-75 font-weight-bolder mr-2 set-with-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 29\n      }\n    }, \"Phone:\"), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"text-muted text-hover-primary \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 29\n      }\n    }, card.phone)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-dark-75 font-weight-bolder mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 29\n      }\n    }, \"Position:\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-muted font-weight-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 29\n      }\n    }, card.position))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"footer-card-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-9 mb-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 23\n      }\n    }, users.map((user, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(Overlay, {\n        show: this.state.isOpenDeleteUserPop[index],\n        target: this.showInfoMember[index],\n        placement: \"bottom\",\n        transition: false,\n        rootClose: true,\n        onHide: this.toggleDeleteUserPop.bind(this, index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Popover, {\n        id: \"popover-contained\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(Popover.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mini-profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mini-profile-member member-large\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 43\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        height: \"50px\",\n        width: \"50px\",\n        src: user.linkAvatar ? `${domainServer + \"/\" + user.linkAvatar}` : `${defaultAva}`,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 54\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mini-profile-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"mini-profile-info-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 43\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"mini-profile-info-title-link js-profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 45\n        }\n      }, user.name)), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 43\n        }\n      }, user.email))), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"pop-over-list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 39\n        }\n      }, this.props.role === roleName.LEADER ? /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.removeMemberToCard(index, this.props.card.id, user.id),\n        className: \"js-remove-member\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 45\n        }\n      }, \"Remove from Card\")) : null)))));\n    }), users.map((user, index) => {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        ref: ref => this.showInfoMember[index] = ref,\n        onClick: this.toggleDeleteUserPop.bind(this, index),\n        key: index,\n        className: \"btn btn-md btn-icon btn-light-facebook btn-pill mx-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          height: '100%',\n          borderRadius: '50%'\n        },\n        width: \"100%\",\n        alt: \"Pic\",\n        src: user.linkAvatar ? `${domainServer + \"/\" + user.linkAvatar}` : `${defaultAva}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 31\n        }\n      }));\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: `Popover${this.props.card.id}`,\n      className: this.props.role === roleName.LEADER ? 'btn btn-md btn-icon btn-light-facebook btn-pill mx-2' : 'btn btn-md btn-icon btn-light-facebook btn-pill mx-2 off-button-add-user',\n      \"data-toggle\": \"tooltip\",\n      title: \"\",\n      \"data-original-title\": \"More users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 27\n      }\n    }))))))))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    role: state.auth.role\n  };\n};\n\nexport default connect(mapStateToProps)(Card);","map":{"version":3,"sources":["/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/Dnd/Card.js"],"names":["React","Component","styled","Draggable","Button","Modal","Overlay","Popover","ButtonPop","PopoverPop","PopoverHeader","PopoverBody","Select","_","connect","roleName","defaultAva","domainServer","moment","Container","div","setPaddingBottomMembers","length","paddingBottom","Card","constructor","props","toggleListBoard","setState","userSelected","showListBoard","state","toggleAddMember","showAddMember","handleOnChangeUser","e","removeMemberToCard","index","card_id","user_id","console","log","currentIsOpenDeleteUserPop","isOpenDeleteUserPop","checkUserIsSelected","users","isSelected","some","id","showUserAnSelected","usersTeam","userCard","cloneDeep","data","remove","user","value","colorRandomSelected","colors","random","Math","floor","toggleMember","selected","addMemberToCard","Array","fill","showInfoMember","bind","toggleDeleteUserPop","self","isShow","content","email","label","name","linkAvatar","render","card","isEmpty","push","provided","draggableProps","dragHandleProps","innerRef","map","interview","top","height","open_detail_card","nameJob","approachDate","format","phone","position","role","LEADER","ref","borderRadius","mapDispatchToProps","dispatch","mapStateToProps","ownProps","auth"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,OAAxB,QAAuC,iBAAvC;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,SAASH,MAAM,IAAII,SAAnB,EAA8BD,OAAO,IAAIE,UAAzC,EAAqDC,aAArD,EAAoEC,WAApE,QAAuF,YAAvF;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAO,cAAP;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,oBAAzC;AACA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AACA,MAAMC,SAAS,GAAGjB,MAAM,CAACkB,GAAI;;;;;;;;CAA7B;;AAUA,MAAMC,uBAAuB,GAAIC,MAAD,IAAY;AAC1C,MAAIC,aAAa,GAAG,EAApB;;AACA,MAAID,MAAM,GAAG,CAAb,EAAgB;AACdC,IAAAA,aAAa,GAAG,EAAhB;AACD;;AACD,SAAO;AACLA,IAAAA,aAAa,EAAG,GAAEA,aAAc;AAD3B,GAAP;AAGD,CARD;;AAUA,MAAMC,IAAN,SAAmBvB,SAAnB,CAA6B;AAC3BwB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAanBC,eAbmB,GAaD,MAAM;AACtB,WAAKC,QAAL,CAAc;AACZC,QAAAA,YAAY,EAAE,EADF;AAEZC,QAAAA,aAAa,EAAE,CAAC,KAAKC,KAAL,CAAWD;AAFf,OAAd;AAID,KAlBkB;;AAAA,SAqBnBE,eArBmB,GAqBD,MAAM;AACtB,WAAKJ,QAAL,CAAc;AACZE,QAAAA,aAAa,EAAE,IADH;AAEZG,QAAAA,aAAa,EAAE,CAAC,KAAKF,KAAL,CAAWE;AAFf,OAAd;AAID,KA1BkB;;AAAA,SA0CnBC,kBA1CmB,GA0CGC,CAAD,IAAO;AAC1B,WAAKP,QAAL,CAAc;AACZE,QAAAA,aAAa,EAAE,KADH;AAEZD,QAAAA,YAAY,EAAEM;AAFF,OAAd;AAID,KA/CkB;;AAAA,SAiEnBC,kBAjEmB,GAiEE,CAACC,KAAD,EAAQC,OAAR,EAAiBC,OAAjB,KAA6B;AAChDC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,WAAKf,KAAL,CAAWU,kBAAX,CAA8BE,OAA9B,EAAuCC,OAAvC;AACA,UAAIG,0BAA0B,GAAG,KAAKX,KAAL,CAAWY,mBAA5C;AACAD,MAAAA,0BAA0B,CAACL,KAAD,CAA1B,GAAoC,KAApC;AACA,WAAKT,QAAL,CAAc;AACZe,QAAAA,mBAAmB,EAAED;AADT,OAAd;AAGD,KAzEkB;;AAAA,SA2EnBE,mBA3EmB,GA2EG,CAACC,KAAD,EAAQN,OAAR,KAAoB;AACxC,UAAIO,UAAU,GAAG,KAAjB;AACAA,MAAAA,UAAU,GAAGjC,CAAC,CAACkC,IAAF,CAAOF,KAAP,EAAc;AAAEG,QAAAA,EAAE,EAAET;AAAN,OAAd,CAAb;AACA,aAAOO,UAAP;AACD,KA/EkB;;AAAA,SAiFnBG,kBAjFmB,GAiFE,CAACC,SAAD,EAAYC,QAAZ,KAAyB;AAC5C,YAAMN,KAAK,GAAGhC,CAAC,CAACuC,SAAF,CAAYF,SAAZ,CAAd;;AACA,WAAK,MAAMG,IAAX,IAAmBF,QAAnB,EAA6B;AAC3BtC,QAAAA,CAAC,CAACyC,MAAF,CAAST,KAAT,EAAgBU,IAAI,IAAIA,IAAI,CAACC,KAAL,KAAeH,IAAI,CAACL,EAA5C;AACD;;AACD,aAAOH,KAAP;AACD,KAvFkB;;AAAA,SAyFnBY,mBAzFmB,GAyFG,MAAM;AAC1B,YAAMC,MAAM,GAAG,CAAC,8CAAD,EAAiD,8CAAjD,EAAiG,iDAAjG,EAAoJ,gDAApJ,EAAsM,iDAAtM,CAAf;AACA,YAAMC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACD,MAAL,KAAgBD,MAAM,CAACpC,MAAlC,CAAf;AACA,aAAOoC,MAAM,CAACC,MAAD,CAAb;AACD,KA7FkB;;AAAA,SA+FnBG,YA/FmB,GA+FJ,CAACC,QAAD,EAAW1B,KAAX,EAAkBC,OAAlB,EAA2BiB,IAA3B,KAAoC;AACjD,UAAIQ,QAAJ,EAAc;AACZ;AACA,aAAK3B,kBAAL,CAAwBC,KAAxB,EAA+BC,OAA/B,EAAwCiB,IAAI,CAACC,KAA7C;AACD,OAHD,MAGO;AACL,aAAKQ,eAAL,CAAqB1B,OAArB,EAA8BiB,IAA9B,EADK,CAEL;AACD;AACF,KAvGkB;;AAEjB,SAAKxB,KAAL,GAAa;AACXY,MAAAA,mBAAmB,EAAE,IAAIsB,KAAJ,CAAU,EAAV,EAAcC,IAAd,CAAmB,KAAnB,CADV;AAEXjC,MAAAA,aAAa,EAAE,KAFJ;AAGXJ,MAAAA,YAAY,EAAE,EAHH;AAIXC,MAAAA,aAAa,EAAE;AAJJ,KAAb;AAMA,SAAKqC,cAAL,GAAsB,EAAtB;AACA,SAAKH,eAAL,GAAuB,KAAKA,eAAL,CAAqBI,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKhC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBgC,IAAxB,CAA6B,IAA7B,CAA1B;AACD;;AAiBDC,EAAAA,mBAAmB,CAAChC,KAAD,EAAQ;AACzB,QAAIiC,IAAI,GAAG,IAAX;AACA,UAAMC,MAAM,GAAG,KAAKxC,KAAL,CAAWY,mBAAX,CAA+BN,KAA/B,CAAf;AACA,QAAIK,0BAA0B,GAAG,IAAIuB,KAAJ,CAAU,EAAV,EAAcC,IAAd,CAAmB,KAAnB,CAAjC;AACA,SAAKtC,QAAL,CAAc;AACZe,MAAAA,mBAAmB,EAAED;AADT,KAAd,EAEG,YAAY;AACbA,MAAAA,0BAA0B,CAACL,KAAD,CAA1B,GAAoC,CAACkC,MAArC;AACAD,MAAAA,IAAI,CAAC1C,QAAL,CAAc;AACZe,QAAAA,mBAAmB,EAAED;AADT,OAAd;AAGD,KAPD;AAQD;;AASDsB,EAAAA,eAAe,CAAC1B,OAAD,EAAUiB,IAAV,EAAgB;AAC7B,UAAMF,IAAI,GAAG;AACXf,MAAAA,OADW;AAEXkC,MAAAA,OAAO,EAAE;AACPxB,QAAAA,EAAE,EAAEO,IAAI,CAACC,KADF;AAEPiB,QAAAA,KAAK,EAAElB,IAAI,CAACmB,KAFL;AAGPC,QAAAA,IAAI,EAAEpB,IAAI,CAACoB,IAHJ;AAIPC,QAAAA,UAAU,EAAErB,IAAI,CAACqB;AAJV;AAFE,KAAb;AASA,SAAKlD,KAAL,CAAWsC,eAAX,CAA2BX,IAA3B;AACA,SAAK1B,eAAL;AACA,SAAKK,eAAL;AACD;;AA4CD6C,EAAAA,MAAM,GAAG;AACP,UAAMhC,KAAK,GAAG,KAAKnB,KAAL,CAAWoD,IAAX,CAAgBN,OAAhB,CAAwBjB,IAAtC;AACA,UAAMuB,IAAI,GAAG,KAAKpD,KAAL,CAAWoD,IAAX,CAAgBN,OAA7B;AACA,QAAItB,SAAS,GAAG,EAAhB;;AACA,QAAI,CAACrC,CAAC,CAACkE,OAAF,CAAU,KAAKrD,KAAL,CAAWmB,KAArB,CAAL,EAAkC;AAChCK,MAAAA,SAAS,CAAC8B,IAAV,CAAe,GAAG,KAAKtD,KAAL,CAAWmB,KAA7B;AACD;;AAED,wBACE,oBAAC,SAAD;AAAW,MAAA,WAAW,EAAE,KAAKnB,KAAL,CAAWoD,IAAX,CAAgB9B,EAAxC;AAA4C,MAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWW,KAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI4C,QAAD,iBACC,oBAAC,SAAD,oBACMA,QAAQ,CAACC,cADf,EAEMD,QAAQ,CAACE,eAFf;AAGE,MAAA,GAAG,EAAEF,QAAQ,CAACG,QAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,UAAD;AAAY,MAAA,eAAe,EAAC,oBAA5B;AAAiD,MAAA,OAAO,EAAC,QAAzD;AAAkE,MAAA,SAAS,EAAC,QAA5E;AAAqF,MAAA,MAAM,EAAE,KAAKrD,KAAL,CAAWE,aAAxG;AAAuH,MAAA,MAAM,EAAG,UAAS,KAAKP,KAAL,CAAWoD,IAAX,CAAgB9B,EAAG,EAA5J;AAA+J,MAAA,MAAM,EAAE,KAAKhB,eAA5K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,mCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,eAEE;AAAG,MAAA,SAAS,EAAC,0CAAb;AAAwD,qBAAY,SAApE;AAA8E,wBAAe,OAA7F;AAAqG,MAAA,KAAK,EAAC,wBAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,eAKE;AAAI,MAAA,SAAS,EAAC,gCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EAMGkB,SAAS,CAACmC,GAAV,CAAc,CAAC9B,IAAD,EAAOlB,KAAP,KAAiB;AAC9B,0BACE;AAAI,QAAA,GAAG,EAAEA,KAAT;AAAgB,QAAA,SAAS,EAAC,WAA1B;AAAsC,QAAA,OAAO,EAAE,MAAM,KAAKyB,YAAL,CAAkB,KAAKlB,mBAAL,CAAyBC,KAAzB,EAAgCU,IAAI,CAACC,KAArC,CAAlB,EAA+DnB,KAA/D,EAAsE,KAAKX,KAAL,CAAWoD,IAAX,CAAgB9B,EAAtF,EAA0FO,IAA1F,CAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,SAAS,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAM,QAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAM,QAAA,SAAS,EAAE,KAAKE,mBAAL,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8CF,IAAI,CAACoB,IAAnD,CADF,CADF,eAIE;AAAO,QAAA,SAAS,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,QAAQ,MAAf;AAAgB,QAAA,QAAQ,MAAxB;AAAyB,QAAA,IAAI,EAAC,UAA9B;AAAyC,QAAA,OAAO,EAAE,KAAK/B,mBAAL,CAAyBC,KAAzB,EAAgCU,IAAI,CAACC,KAArC,CAAlD;AAA+F,QAAA,IAAI,EAAC,aAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAJF,CADF,CADF;AAaD,KAdA,CANH,CADF,CADF,CAFF,eA6BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,6CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEGsB,IAAI,CAACQ,SAAL,gBAAiB;AAAK,MAAA,SAAS,EAAC,4DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAChB;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,KAAK,EAAE;AAAEC,QAAAA,GAAG,EAAE,MAAP;AAAeC,QAAAA,MAAM,EAAE;AAAvB,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,yBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAC8C;AAAG,MAAA,SAAS,EAAC,uBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAD9C,CADgB,CAAjB,GAIQ,EANX,eAOE;AAAK,MAAA,KAAK,EAAEnE,uBAAuB,CAACwB,KAAK,CAACvB,MAAP,CAAnC;AAAmD,MAAA,SAAS,EAAC,iCAA7D;AAA+F,MAAA,OAAO,EAAE,KAAKI,KAAL,CAAW+D,gBAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,iEAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgFX,IAAI,CAACH,IAArF,OAA4FG,IAAI,CAACY,OAAjG,CADF,CADF,eAKE;AAAM,MAAA,SAAS,EAAC,6BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+CxE,MAAM,CAAC4D,IAAI,CAACa,YAAN,CAAN,CAA0BC,MAA1B,CAAiC,YAAjC,CAA/C,CALF,CADF,CAFF,eAaE;AAAG,MAAA,SAAS,EAAC,MAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqBd,IAAI,CAACY,OAA1B,CAbF,eAeE;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,oDAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAG,MAAA,KAAK,EAAEZ,IAAI,CAACL,KAAf;AAAsB,MAAA,SAAS,EAAC,gDAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACEK,IAAI,CAACL,KADP,CAFF,CADF,eAOE;AAAK,MAAA,SAAS,EAAC,uDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,oDAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAG,MAAA,SAAS,EAAC,gCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+CK,IAAI,CAACe,KAApD,CAFF,CAPF,eAWE;AAAK,MAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,sCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAM,MAAA,SAAS,EAAC,6BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+Cf,IAAI,CAACgB,QAApD,CAFF,CAXF,CAfF,CADF,CAPF,eA0CE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEIjD,KAAK,CAACwC,GAAN,CAAU,CAAC9B,IAAD,EAAOlB,KAAP,KAAiB;AACzB,0BACE;AAAK,QAAA,GAAG,EAAEA,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,OAAD;AACE,QAAA,IAAI,EACF,KAAKN,KAAL,CAAWY,mBAAX,CAA+BN,KAA/B,CAFJ;AAIE,QAAA,MAAM,EAAE,KAAK8B,cAAL,CAAoB9B,KAApB,CAJV;AAKE,QAAA,SAAS,EAAC,QALZ;AAME,QAAA,UAAU,EAAE,KANd;AAOE,QAAA,SAAS,EAAE,IAPb;AAQE,QAAA,MAAM,EAAE,KAAKgC,mBAAL,CAAyBD,IAAzB,CACN,IADM,EAEN/B,KAFM,CARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAaE,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAC,mBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,OAAD,CAAS,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,IAAI,EAAC,EAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAW;AAAK,QAAA,MAAM,EAAC,MAAZ;AAAmB,QAAA,KAAK,EAAC,MAAzB;AAAgC,QAAA,GAAG,EAAEkB,IAAI,CAACqB,UAAL,GAAmB,GAAE3D,YAAY,GAAG,GAAf,GAAqBsC,IAAI,CAACqB,UAAW,EAA1D,GAC3C,GAAE5D,UAAW,EADP;AACU,QAAA,GAAG,EAAC,EADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAX,CADF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,yBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,SAAS,EAAC,yCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAwDuC,IAAI,CAACoB,IAA7D,CADF,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIpB,IAAI,CAACkB,KAAT,CAJF,CALF,CADF,eAaE;AAAI,QAAA,SAAS,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEG,KAAK/C,KAAL,CAAWqE,IAAX,KAAoBhF,QAAQ,CAACiF,MAA7B,gBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAG,QAAA,OAAO,EAAE,MAAM,KAAK5D,kBAAL,CAAwBC,KAAxB,EAA+B,KAAKX,KAAL,CAAWoD,IAAX,CAAgB9B,EAA/C,EAAmDO,IAAI,CAACP,EAAxD,CAAlB;AAA+E,QAAA,SAAS,EAAC,kBAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADA,CADH,GAIG,IANN,CAbF,CADF,CAbF,CADF,CADF;AA0CD,KA3CD,CAFJ,EA+CGH,KAAK,CAACwC,GAAN,CAAU,CAAC9B,IAAD,EAAOlB,KAAP,KAAiB;AAC1B,0BACE;AAAG,QAAA,GAAG,EAAG4D,GAAD,IACL,KAAK9B,cAAL,CAAoB9B,KAApB,IAA6B4D,GADhC;AAEE,QAAA,OAAO,EAAE,KAAK5B,mBAAL,CAAyBD,IAAzB,CACT,IADS,EAET/B,KAFS,CAFX;AAME,QAAA,GAAG,EAAEA,KANP;AAMc,QAAA,SAAS,EAAC,sDANxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOE;AAAK,QAAA,KAAK,EAAE;AAAEmD,UAAAA,MAAM,EAAE,MAAV;AAAkBU,UAAAA,YAAY,EAAE;AAAhC,SAAZ;AAAqD,QAAA,KAAK,EAAC,MAA3D;AAAkE,QAAA,GAAG,EAAC,KAAtE;AAA4E,QAAA,GAAG,EAAE3C,IAAI,CAACqB,UAAL,GAAmB,GAAE3D,YAAY,GAAG,GAAf,GAAqBsC,IAAI,CAACqB,UAAW,EAA1D,GAC5E,GAAE5D,UAAW,EADlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,CADF;AAaD,KAdA,CA/CH,eA8DE;AAAK,MAAA,EAAE,EAAG,UAAS,KAAKU,KAAL,CAAWoD,IAAX,CAAgB9B,EAAG,EAAtC;AAAyC,MAAA,SAAS,EAAE,KAAKtB,KAAL,CAAWqE,IAAX,KAAoBhF,QAAQ,CAACiF,MAA7B,GAAsC,sDAAtC,GAA+F,0EAAnJ;AAA+N,qBAAY,SAA3O;AAAqP,MAAA,KAAK,EAAC,EAA3P;AAA8P,6BAAoB,YAAlR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGE;AAAG,MAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CA9DF,CADF,CA1CF,CADF,CADF,CA7BF,CALF,CAFJ,CADF;AAgKD;;AAnR0B;;AAuR7B,MAAMG,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO,EAAP;AACD,CAFD;;AAGA,MAAMC,eAAe,GAAG,CAACtE,KAAD,EAAQuE,QAAR,KAAqB;AAC3C,SAAO;AACLP,IAAAA,IAAI,EAAEhE,KAAK,CAACwE,IAAN,CAAWR;AADZ,GAAP;AAGD,CAJD;;AAMA,eAAejF,OAAO,CAACuF,eAAD,CAAP,CAAyB7E,IAAzB,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport { Draggable } from \"react-beautiful-dnd\";\nimport { Button, Modal, Overlay } from \"react-bootstrap\";\nimport Popover from \"react-bootstrap/Popover\";\nimport { Button as ButtonPop, Popover as PopoverPop, PopoverHeader, PopoverBody } from 'reactstrap';\nimport Select from 'react-select'\nimport _ from 'lodash'\nimport \"./styles.css\";\nimport { connect } from \"react-redux\";\nimport roleName from '../../utils/const'\nimport { defaultAva, domainServer } from \"../../utils/config\";\nimport * as moment from 'moment'\nconst Container = styled.div`\n  margin-bottom: 8px;\n  border-radius: 3px;\n  box-shadow: 0 1px 0 rgba(9, 30, 66, 0.25);\n  border-radius: 2px;\n  padding: 6px 8px;\n  background-color: #fff;\n  font-family: \"Poppins\", sans-serif;\n`;\n\nconst setPaddingBottomMembers = (length) => {\n  let paddingBottom = 56;\n  if (length > 3) {\n    paddingBottom = 95\n  }\n  return {\n    paddingBottom: `${paddingBottom}px`\n  }\n}\n\nclass Card extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpenDeleteUserPop: new Array(10).fill(false),\n      showAddMember: false,\n      userSelected: {},\n      showListBoard: true,\n    };\n    this.showInfoMember = [];\n    this.addMemberToCard = this.addMemberToCard.bind(this);\n    this.removeMemberToCard = this.removeMemberToCard.bind(this)\n  }\n\n  toggleListBoard = () => {\n    this.setState({\n      userSelected: {},\n      showListBoard: !this.state.showListBoard\n    })\n  }\n\n\n  toggleAddMember = () => {\n    this.setState({\n      showListBoard: true,\n      showAddMember: !this.state.showAddMember\n    })\n  }\n\n  toggleDeleteUserPop(index) {\n    let self = this;\n    const isShow = this.state.isOpenDeleteUserPop[index]\n    let currentIsOpenDeleteUserPop = new Array(10).fill(false);\n    this.setState({\n      isOpenDeleteUserPop: currentIsOpenDeleteUserPop,\n    }, function () {\n      currentIsOpenDeleteUserPop[index] = !isShow;\n      self.setState({\n        isOpenDeleteUserPop: currentIsOpenDeleteUserPop,\n      });\n    });\n  }\n\n  handleOnChangeUser = (e) => {\n    this.setState({\n      showListBoard: false,\n      userSelected: e\n    })\n  }\n\n  addMemberToCard(card_id, user) {\n    const data = {\n      card_id,\n      content: {\n        id: user.value,\n        email: user.label,\n        name: user.name,\n        linkAvatar: user.linkAvatar\n      }\n    }\n    this.props.addMemberToCard(data)\n    this.toggleListBoard();\n    this.toggleAddMember();\n  }\n\n\n  removeMemberToCard = (index, card_id, user_id) => {\n    console.log(\"da vao day\")\n    this.props.removeMemberToCard(card_id, user_id);\n    let currentIsOpenDeleteUserPop = this.state.isOpenDeleteUserPop;\n    currentIsOpenDeleteUserPop[index] = false;\n    this.setState({\n      isOpenDeleteUserPop: currentIsOpenDeleteUserPop\n    })\n  }\n\n  checkUserIsSelected = (users, user_id) => {\n    let isSelected = false;\n    isSelected = _.some(users, { id: user_id })\n    return isSelected\n  }\n\n  showUserAnSelected = (usersTeam, userCard) => {\n    const users = _.cloneDeep(usersTeam);\n    for (const data of userCard) {\n      _.remove(users, user => user.value === data.id)\n    }\n    return users\n  }\n\n  colorRandomSelected = () => {\n    const colors = ['label label-xl label-inline label-light-dark', 'label label-xl label-inline label-light-dark', 'label label-xl label-inline label-light-success', 'label label-xl label-inline label-light-danger', 'label label-xl label-inline label-light-success'];\n    const random = Math.floor(Math.random() * colors.length);\n    return colors[random]\n  }\n\n  toggleMember = (selected, index, card_id, user) => {\n    if (selected) {\n      // remove member\n      this.removeMemberToCard(index, card_id, user.value)\n    } else {\n      this.addMemberToCard(card_id, user)\n      // add member\n    }\n  }\n\n\n  render() {\n    const users = this.props.card.content.user;\n    const card = this.props.card.content;\n    let usersTeam = [];\n    if (!_.isEmpty(this.props.users)) {\n      usersTeam.push(...this.props.users);\n    }\n\n    return (\n      <Draggable draggableId={this.props.card.id} index={this.props.index}>\n        {(provided) => (\n          <Container\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            ref={provided.innerRef}\n          >\n            <div>\n\n              <PopoverPop popperClassName=\"popover-modal-card\" trigger=\"legacy\" placement=\"bottom\" isOpen={this.state.showAddMember} target={`Popover${this.props.card.id}`} toggle={this.toggleAddMember}>\n                <PopoverBody>\n                  <ul className=\"navi navi-hover\">\n                    <li className=\"navi-header font-weight-bold py-4\">\n                      <span className=\"font-size-lg\">Toggle member to card:</span>\n                      <i className=\"flaticon2-information icon-md text-muted\" data-toggle=\"tooltip\" data-placement=\"right\" title=\"Click to learn more...\" />\n                    </li>\n                    <li className=\"navi-separator mb-3 opacity-70\" />\n                    {usersTeam.map((user, index) => {\n                      return (\n                        <li key={index} className=\"navi-item\" onClick={() => this.toggleMember(this.checkUserIsSelected(users, user.value), index, this.props.card.id, user)}>\n                          <a className=\"navi-link navi-link-cus\">\n                            <span className=\"navi-text\">\n                              <span className={this.colorRandomSelected()}>{user.name}</span>\n                            </span>\n                            <label className=\"checkbox\">\n                              <input disabled readOnly type=\"checkbox\" checked={this.checkUserIsSelected(users, user.value)} name=\"Checkboxes1\" />\n                              <span></span>\n                            </label>\n                          </a>\n                        </li>\n                      )\n                    })}\n                  </ul>\n                </PopoverBody>\n              </PopoverPop>\n\n              <div>\n                <div className=\"body_card\">\n                  <div className=\"card card-custom gutter-b card-stretch mb-0\">\n\n                    {card.interview ? <div className=\"card-header ribbon ribbon-clip ribbon-right ribbon-ver-cus\">\n                      <div className=\"ribbon-target\" style={{ top: '14px', height: '30px' }}>\n                        <span className=\"ribbon-inner bg-success\" /><i className=\"fa fa-star text-white\" />\n                      </div>\n                    </div> : ''}\n                    <div style={setPaddingBottomMembers(users.length)} className=\"card-body card-body-trello pt-4\" onClick={this.props.open_detail_card}>\n                      <div >\n                        \n                        <div className=\"d-flex align-items-center mb-4\">\n                          <div className=\"d-flex flex-column card-header-detail\">\n                            <div className=\"card-header__title\">\n                              <a className=\"text-dark font-weight-bold text-hover-primary font-size-h4 mb-0\">{card.name} {card.nameJob}</a>\n                             \n                            </div>\n                            <span className=\"text-muted font-weight-bold\">{moment(card.approachDate).format('DD/MM/YYYY')}</span>\n                          </div>\n                          \n                        </div>\n                        \n                        <p className=\"mb-4\">{card.nameJob}</p>\n                       \n                        <div className=\"mb-7 card-content-info\">\n                          <div className=\"d-flex justify-content-between align-items-center\">\n                            <span className=\"text-dark-75 font-weight-bolder mr-2 set-with-info\">Email:</span>\n                            <a title={card.email} className=\"text-muted text-hover-primary custom-dot-email\">{\n                              card.email\n                            }</a>\n                          </div>\n                          <div className=\"d-flex justify-content-between align-items-cente my-1\">\n                            <span className=\"text-dark-75 font-weight-bolder mr-2 set-with-info\">Phone:</span>\n                            <a className=\"text-muted text-hover-primary \">{card.phone}</a>\n                          </div>\n                          <div className=\"d-flex justify-content-between align-items-center\">\n                            <span className=\"text-dark-75 font-weight-bolder mr-2\">Position:</span>\n                            <span className=\"text-muted font-weight-bold\">{card.position}</span>\n                          </div>\n                        </div>\n                      </div>\n                \n                    </div>\n                    <div className=\"footer-card-detail\">\n                      <div className=\"mt-9 mb-6\">\n                        {\n                          users.map((user, index) => {\n                            return (\n                              <div key={index} >\n                                <Overlay\n                                  show={\n                                    this.state.isOpenDeleteUserPop[index]\n                                  }\n                                  target={this.showInfoMember[index]}\n                                  placement=\"bottom\"\n                                  transition={false}\n                                  rootClose={true}\n                                  onHide={this.toggleDeleteUserPop.bind(\n                                    this,\n                                    index\n                                  )}\n                                >\n                                  <Popover id=\"popover-contained\">\n                                    <Popover.Content>\n                                      <div className=\"mini-profile\">\n                                        <div className=\"mini-profile-member member-large\">\n                                          <a href=\"\"><img height=\"50px\" width=\"50px\" src={user.linkAvatar ? `${domainServer + \"/\" + user.linkAvatar}`\n                                            : `${defaultAva}`} alt=\"\" /></a>\n                                        </div>\n                                        <div className=\"mini-profile-info\">\n                                          <h3 className=\"mini-profile-info-title\">\n                                            <a className=\"mini-profile-info-title-link js-profile\">{user.name}</a>\n                                          </h3>\n                                          <p>{user.email}</p>\n                                        </div>\n                                      </div>\n                                      <ul className=\"pop-over-list\">\n\n                                        {this.props.role === roleName.LEADER\n                                          ? <li>\n                                            <a onClick={() => this.removeMemberToCard(index, this.props.card.id, user.id)} className=\"js-remove-member\">Remove from Card</a>\n                                          </li>\n                                          : null}\n                                      </ul>\n                                    </Popover.Content>\n                                  </Popover>\n                                </Overlay>\n                              </div>\n                            )\n                          })\n                        }\n                        {users.map((user, index) => {\n                          return (\n                            <a ref={(ref) =>\n                              (this.showInfoMember[index] = ref)\n                            } onClick={this.toggleDeleteUserPop.bind(\n                              this,\n                              index\n                            )}\n                              key={index} className=\"btn btn-md btn-icon btn-light-facebook btn-pill mx-1\">\n                              <img style={{ height: '100%', borderRadius: '50%' }} width=\"100%\" alt=\"Pic\" src={user.linkAvatar ? `${domainServer + \"/\" + user.linkAvatar}`\n                                : `${defaultAva}`} />\n                            </a>\n\n                          )\n                        })}\n                        <div id={`Popover${this.props.card.id}`} className={this.props.role === roleName.LEADER ? 'btn btn-md btn-icon btn-light-facebook btn-pill mx-2' : 'btn btn-md btn-icon btn-light-facebook btn-pill mx-2 off-button-add-user'} data-toggle=\"tooltip\" title=\"\" data-original-title=\"More users\">\n\n\n                          <i className=\"fas fa-plus\"></i>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </Container>\n        )\n        }\n      </Draggable>\n    );\n  }\n}\n\n\nconst mapDispatchToProps = (dispatch) => {\n  return {};\n};\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    role: state.auth.role,\n  };\n};\n\nexport default connect(mapStateToProps)(Card);\n"]},"metadata":{},"sourceType":"module"}