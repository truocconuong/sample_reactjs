{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _contextSubscribe = require(\"../lib/contextSubscribe\");\n\nvar _state = require(\"../lib/state\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar tabbordionInstances = 0;\nvar tabbordionUniqId = 0;\n\nfunction getStateBem(props) {\n  return {\n    bemModifiers: props.bemModifiers,\n    bemSeparator: props.bemSeparator,\n    blockElements: props.blockElements\n  };\n}\n\nfunction getStateTabbordion(context, props, state) {\n  var panels = (0, _state.getArray)(state.stateful ? state.panels : props.panels);\n  return {\n    animateContent: props.animateContent,\n    checkedPanels: panels.filter(_state.getChecked).map(_state.getIndex),\n    disabledPanels: panels.filter(_state.getDisabled).map(_state.getIndex),\n    firstVisiblePanel: context.firstVisibleIndex,\n    lastVisiblePanel: context.lastVisibleIndex,\n    panelName: props.name || context.uniqId,\n    panelType: props.mode === 'multiple' ? 'checkbox' : 'radio',\n    tabbordionId: props.id || context.uniqId\n  };\n}\n\nfunction identity(value) {\n  return value;\n}\n\nvar Tabbordion = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Tabbordion, _PureComponent);\n\n  var _super = _createSuper(Tabbordion);\n\n  function Tabbordion(props) {\n    var _this;\n\n    _classCallCheck(this, Tabbordion);\n\n    _this = _super.call(this, props);\n    tabbordionInstances++;\n    _this.uniqId = \"tabbordion-\".concat(tabbordionUniqId);\n    tabbordionUniqId++;\n    _this.getNextState = _this.getNextState.bind(_assertThisInitialized(_this));\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_this));\n    _this.firstVisibleIndex = null;\n    _this.lastVisibleIndex = null; // panels always overrides initialPanels\n\n    _this.state = _this.getNextState(props, {\n      stateful: false\n    }, Array.isArray(props.panels) ? props.panels : props.initialPanels); // context subscribers\n\n    _this.subscribers = {\n      bem: [],\n      tabbordion: []\n    };\n    _this.childContext = {\n      bem: {\n        getState: function getState() {\n          return _this.bemState;\n        },\n        subscribe: (0, _contextSubscribe.addSubscriber)(_this.subscribers.bem),\n        unsubscribe: (0, _contextSubscribe.removeSubscriber)(_this.subscribers.bem)\n      },\n      tabbordion: {\n        getState: function getState() {\n          return _this.tabbordionState;\n        },\n        onChangePanel: _this.onChange,\n        subscribe: (0, _contextSubscribe.addSubscriber)(_this.subscribers.tabbordion),\n        unsubscribe: (0, _contextSubscribe.removeSubscriber)(_this.subscribers.tabbordion)\n      }\n    };\n    _this.bemState = getStateBem(props);\n    _this.tabbordionState = getStateTabbordion(_assertThisInitialized(_this), props, _this.state);\n    return _this;\n  }\n\n  _createClass(Tabbordion, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var nextState = this.getNextState(nextProps, this.state); // only update if there were changes to the local component state\n\n      if (nextState !== this.state) {\n        this.setState(nextState);\n      }\n\n      var bemState = getStateBem(nextProps);\n\n      if ((0, _state.isShallowlyDifferent)(bemState, this.bemState)) {\n        this.subscribers.bem.forEach(function (component) {\n          return component.forceUpdate();\n        });\n        this.bemState = bemState;\n      }\n\n      var tabbordionState = getStateTabbordion(this, nextProps, nextState);\n\n      if ((0, _state.isShallowlyDifferent)(tabbordionState, this.tabbordionState)) {\n        this.subscribers.tabbordion.forEach(function (component) {\n          return component.forceUpdate();\n        });\n        this.tabbordionState = tabbordionState;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      tabbordionInstances--;\n      if (tabbordionInstances === 0) tabbordionUniqId = 0;\n    }\n  }, {\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return this.childContext;\n    }\n    /*\n     * Controls props and does those nasty little staties we kills them My Precious, *gollum* *gollum*\n     * @param {object} props Props received by the component\n     * @param {object} prevState State contained in the component\n     * @param {array} initialPanels Initial panels state when component is mounted as a stateful component\n     * @return {object} State to be used by the component\n     */\n\n  }, {\n    key: \"getNextState\",\n    value: function getNextState(props, prevState, initialPanels) {\n      var panels = (0, _state.getArray)(prevState.stateful ? prevState.panels : initialPanels || props.panels);\n      var panelProps = [];\n      var usedIndexes = [];\n      var invalidIndexes = [];\n      var allowMultiChecked = props.mode === 'multiple'; // fragments force us to do some recursive looping to find our actual children as React.Children does not do it\n\n      var childPool = [props.children]; // this logic probably needs to be refactored so that panels register to tabbordion\n\n      while (childPool.length) {\n        _react.Children.forEach(childPool.shift(), function (child) {\n          if (child == null || !child.type) {\n            return;\n          }\n\n          var props = child.props || child._store && child._store.props || {};\n\n          if (child.type === _react.default.Fragment && props.children) {\n            childPool.push(props.children);\n          } else if (child.type.contextTypes && child.type.contextTypes.tabbordion) {\n            // use false to mark panels with invalid index\n            var index = props.index != null ? props.index : false; // missing index and duplicates are invalid\n\n            var isInvalidIndex = index === false || usedIndexes.includes(index);\n\n            if (isInvalidIndex) {\n              invalidIndexes.push(panelProps.length);\n            } else {\n              usedIndexes.push(index);\n            }\n\n            panelProps.push({\n              checked: props.checked,\n              disabled: props.disabled,\n              index: isInvalidIndex ? false : index,\n              visible: props.visible\n            });\n          }\n        });\n      } // time to fix invalid index values\n\n\n      var unusedIndex = 0;\n\n      while (invalidIndexes.length > 0) {\n        // find the next usable index value\n        while (usedIndexes.includes(unusedIndex)) {\n          unusedIndex++;\n        } // use the index value\n\n\n        panelProps[invalidIndexes.shift()].index = unusedIndex; // try another index on the next round\n\n        unusedIndex++;\n      } // now that we know the indexes we can link to existing data; if it happens to exist, of course\n\n\n      var checkedCount = 0;\n      var firstVisibleIndex = null;\n      var lastVisibleIndex = null;\n      var nextPanels = panelProps.map(function (props, index) {\n        var panel = panels.find(function (panel) {\n          return panel.index === props.index;\n        }) || {\n          checked: checked,\n          disabled: disabled,\n          visible: visible\n        };\n        var checked = (props.checked != null ? props.checked : !!panel.checked) && (allowMultiChecked || checkedCount === 0);\n        var disabled = props.disabled != null ? props.disabled : !!panel.disabled;\n        var visible = props.visible != null ? props.visible : panel.visible === false ? false : true;\n\n        if (visible) {\n          lastVisibleIndex = index;\n          if (firstVisibleIndex == null) firstVisibleIndex = lastVisibleIndex;\n        }\n\n        if (checked && visible) checkedCount++;\n        return {\n          checked: checked,\n          disabled: disabled,\n          index: props.index,\n          visible: visible\n        };\n      });\n\n      if (firstVisibleIndex != null) {\n        // one panel must always be checked in single mode\n        if (checkedCount === 0 && props.mode !== 'multiple' && props.mode !== 'toggle') {\n          nextPanels[firstVisibleIndex].checked = true;\n        } // it is now safe to use the actual indexes instead of references\n\n\n        firstVisibleIndex = nextPanels[firstVisibleIndex].index;\n        lastVisibleIndex = nextPanels[lastVisibleIndex].index;\n      } // keep in local state: We can do this in this way because these values are derived from main panels state.\n      //                      Also, this state is updated each time props change, thus we maintain \"pureness\".\n\n\n      this.firstVisibleIndex = firstVisibleIndex;\n      this.lastVisibleIndex = lastVisibleIndex; // determine who will own the state\n\n      var stateful = !props.onChange || !props.onPanels || !Array.isArray(props.panels);\n\n      if (stateful) {\n        // it is mine, my own, My Preciouss...\n        if (!prevState.stateful || (0, _state.isShallowlyDifferentArray)(prevState.panels, nextPanels)) {\n          if (props.onPanels) props.onPanels(nextPanels);\n          return {\n            panels: nextPanels,\n            stateful: stateful\n          };\n        }\n      } else {\n        // provide updated state to whomever will own it\n        if ((0, _state.isShallowlyDifferentArray)(panels, nextPanels)) {\n          props.onPanels(nextPanels);\n        } // clear local state\n\n\n        if (prevState.stateful) {\n          return {\n            panels: null,\n            stateful: stateful\n          };\n        }\n      }\n\n      return prevState;\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(index) {\n      var mode = this.props.mode;\n\n      if (!this.state.stateful) {\n        this.props.onChange({\n          index: index,\n          mode: mode\n        });\n        return;\n      } // we can mutate this state as we please because we own this state\n\n\n      var panel = this.state.panels.find(function (panel) {\n        return panel.index === index;\n      });\n\n      if (panel == null) {\n        throw new Error('Unexpected invalid panel index: ' + index);\n      }\n\n      var didMutate = false;\n\n      switch (mode) {\n        case 'toggle':\n          // only one can be active, but also none can be active (radio, but allow unselect)\n          this.state.panels.forEach(function (togglePanel) {\n            if (togglePanel !== panel && togglePanel.checked) {\n              togglePanel.checked = false;\n            }\n          });\n          panel.checked = !panel.checked;\n          didMutate = true;\n          break;\n\n        case 'multiple':\n          // no state restrictions/relations (checkbox)\n          panel.checked = !panel.checked;\n          didMutate = true;\n          break;\n\n        default:\n          // only one panel must stay active (radio)\n          this.state.panels.forEach(function (togglePanel) {\n            if (togglePanel !== panel && togglePanel.checked) {\n              togglePanel.checked = false;\n              didMutate = true;\n            }\n          });\n\n          if (!panel.checked) {\n            panel.checked = true;\n            didMutate = true;\n          }\n\n      }\n\n      if (didMutate) {\n        this.setState({\n          panels: this.state.panels.slice(0)\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // use destructuring to pick out props we don't need to pass to the rendered component\n      var _this$props = this.props,\n          animateContent = _this$props.animateContent,\n          children = _this$props.children,\n          Component = _this$props.component,\n          bemModifiers = _this$props.bemModifiers,\n          bemSeparator = _this$props.bemSeparator,\n          blockElements = _this$props.blockElements,\n          component = _this$props.component,\n          initialPanels = _this$props.initialPanels,\n          mode = _this$props.mode,\n          name = _this$props.name,\n          onChange = _this$props.onChange,\n          onPanels = _this$props.onPanels,\n          panelsProp = _this$props.panels,\n          props = _objectWithoutProperties(_this$props, [\"animateContent\", \"children\", \"component\", \"bemModifiers\", \"bemSeparator\", \"blockElements\", \"component\", \"initialPanels\", \"mode\", \"name\", \"onChange\", \"onPanels\", \"panels\"]);\n\n      var panel = 0;\n      var panels = this.state.stateful ? this.state.panels : panelsProp;\n      var childPool = [children];\n      var clones = [];\n\n      while (childPool.length) {\n        _react.Children.forEach(childPool.shift(), function (child) {\n          if (child == null || !child.type) {\n            clones.push(child);\n          } else if (child.type === _react.default.Fragment) {\n            childPool.push(child.props.children);\n          } else if (child.type.contextTypes && child.type.contextTypes.tabbordion) {\n            var clone = /*#__PURE__*/_react.default.cloneElement(child, panels[panel]);\n\n            panel++;\n            clones.push(clone);\n          } else {\n            clones.push(child);\n          }\n        });\n      }\n\n      return /*#__PURE__*/_react.default.createElement(Component, _extends({}, props, {\n        role: \"tablist\"\n      }), _react.Children.map(clones, identity));\n    }\n  }]);\n\n  return Tabbordion;\n}(_react.PureComponent);\n\nTabbordion.childContextTypes = {\n  bem: _propTypes.default.object,\n  tabbordion: _propTypes.default.object\n};\nTabbordion.defaultProps = {\n  animateContent: false,\n  bemModifiers: {\n    animated: 'animated',\n    between: 'between',\n    checked: 'checked',\n    content: 'content',\n    disabled: 'disabled',\n    enabled: 'enabled',\n    first: 'first',\n    hidden: 'hidden',\n    last: 'last',\n    noContent: 'no-content',\n    unchecked: 'unchecked'\n  },\n  bemSeparator: '--',\n  blockElements: {\n    animator: 'panel__animator',\n    content: 'panel__content',\n    label: 'panel__label',\n    panel: 'panel'\n  },\n  component: 'ul',\n  mode: 'single'\n};\nTabbordion.propTypes = {\n  animateContent: _propTypes.default.oneOf([false, 'height', 'marginTop']),\n  bemModifiers: _propTypes.default.shape({\n    between: _propTypes.default.string,\n    checked: _propTypes.default.string,\n    content: _propTypes.default.string,\n    disabled: _propTypes.default.string,\n    enabled: _propTypes.default.string,\n    first: _propTypes.default.string,\n    hidden: _propTypes.default.string,\n    last: _propTypes.default.string,\n    noContent: _propTypes.default.string,\n    unchecked: _propTypes.default.string\n  }),\n  bemSeparator: _propTypes.default.string,\n  blockElements: _propTypes.default.shape({\n    content: _propTypes.default.string,\n    label: _propTypes.default.string,\n    panel: _propTypes.default.string\n  }),\n  children: _propTypes.default.node,\n  className: _propTypes.default.string,\n  component: _propTypes.default.oneOfType([_propTypes.default.func, _propTypes.default.object, _propTypes.default.string]),\n  id: _propTypes.default.string,\n  initialPanels: _propTypes.default.arrayOf(_propTypes.default.shape({\n    checked: _propTypes.default.bool,\n    disabled: _propTypes.default.bool,\n    index: _propTypes.default.number,\n    visible: _propTypes.default.bool\n  })),\n  mode: _propTypes.default.oneOf(['single', 'toggle', 'multiple']),\n  name: _propTypes.default.string,\n  onChange: _propTypes.default.func,\n  onPanels: _propTypes.default.func,\n  panels: _propTypes.default.arrayOf(_propTypes.default.shape({\n    checked: _propTypes.default.bool,\n    disabled: _propTypes.default.bool,\n    index: _propTypes.default.number,\n    visible: _propTypes.default.bool\n  }))\n};\nvar _default = Tabbordion;\nexports.default = _default;","map":{"version":3,"sources":["/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/node_modules/react-tabbordion/dist/module/components/Tabbordion.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_contextSubscribe","_state","obj","__esModule","_getRequireWildcardCache","WeakMap","cache","_typeof","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","_extends","assign","target","i","arguments","length","source","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","tabbordionInstances","tabbordionUniqId","getStateBem","bemModifiers","bemSeparator","blockElements","getStateTabbordion","context","state","panels","getArray","stateful","animateContent","checkedPanels","filter","getChecked","map","getIndex","disabledPanels","getDisabled","firstVisiblePanel","firstVisibleIndex","lastVisiblePanel","lastVisibleIndex","panelName","name","uniqId","panelType","mode","tabbordionId","id","identity","Tabbordion","_PureComponent","_super","_this","concat","getNextState","bind","onChange","Array","isArray","initialPanels","subscribers","bem","tabbordion","childContext","getState","bemState","subscribe","addSubscriber","unsubscribe","removeSubscriber","tabbordionState","onChangePanel","UNSAFE_componentWillReceiveProps","nextProps","nextState","setState","isShallowlyDifferent","forEach","component","forceUpdate","componentWillUnmount","getChildContext","prevState","panelProps","usedIndexes","invalidIndexes","allowMultiChecked","childPool","children","Children","shift","child","type","_store","Fragment","push","contextTypes","index","isInvalidIndex","includes","checked","disabled","visible","unusedIndex","checkedCount","nextPanels","panel","find","onPanels","isShallowlyDifferentArray","Error","didMutate","togglePanel","slice","render","_this$props","Component","panelsProp","clones","clone","cloneElement","createElement","role","PureComponent","childContextTypes","object","defaultProps","animated","between","content","enabled","first","hidden","last","noContent","unchecked","animator","label","propTypes","oneOf","shape","string","node","className","oneOfType","func","arrayOf","bool","number","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _contextSubscribe = require(\"../lib/contextSubscribe\");\n\nvar _state = require(\"../lib/state\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar tabbordionInstances = 0;\nvar tabbordionUniqId = 0;\n\nfunction getStateBem(props) {\n  return {\n    bemModifiers: props.bemModifiers,\n    bemSeparator: props.bemSeparator,\n    blockElements: props.blockElements\n  };\n}\n\nfunction getStateTabbordion(context, props, state) {\n  var panels = (0, _state.getArray)(state.stateful ? state.panels : props.panels);\n  return {\n    animateContent: props.animateContent,\n    checkedPanels: panels.filter(_state.getChecked).map(_state.getIndex),\n    disabledPanels: panels.filter(_state.getDisabled).map(_state.getIndex),\n    firstVisiblePanel: context.firstVisibleIndex,\n    lastVisiblePanel: context.lastVisibleIndex,\n    panelName: props.name || context.uniqId,\n    panelType: props.mode === 'multiple' ? 'checkbox' : 'radio',\n    tabbordionId: props.id || context.uniqId\n  };\n}\n\nfunction identity(value) {\n  return value;\n}\n\nvar Tabbordion = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Tabbordion, _PureComponent);\n\n  var _super = _createSuper(Tabbordion);\n\n  function Tabbordion(props) {\n    var _this;\n\n    _classCallCheck(this, Tabbordion);\n\n    _this = _super.call(this, props);\n    tabbordionInstances++;\n    _this.uniqId = \"tabbordion-\".concat(tabbordionUniqId);\n    tabbordionUniqId++;\n    _this.getNextState = _this.getNextState.bind(_assertThisInitialized(_this));\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_this));\n    _this.firstVisibleIndex = null;\n    _this.lastVisibleIndex = null; // panels always overrides initialPanels\n\n    _this.state = _this.getNextState(props, {\n      stateful: false\n    }, Array.isArray(props.panels) ? props.panels : props.initialPanels); // context subscribers\n\n    _this.subscribers = {\n      bem: [],\n      tabbordion: []\n    };\n    _this.childContext = {\n      bem: {\n        getState: function getState() {\n          return _this.bemState;\n        },\n        subscribe: (0, _contextSubscribe.addSubscriber)(_this.subscribers.bem),\n        unsubscribe: (0, _contextSubscribe.removeSubscriber)(_this.subscribers.bem)\n      },\n      tabbordion: {\n        getState: function getState() {\n          return _this.tabbordionState;\n        },\n        onChangePanel: _this.onChange,\n        subscribe: (0, _contextSubscribe.addSubscriber)(_this.subscribers.tabbordion),\n        unsubscribe: (0, _contextSubscribe.removeSubscriber)(_this.subscribers.tabbordion)\n      }\n    };\n    _this.bemState = getStateBem(props);\n    _this.tabbordionState = getStateTabbordion(_assertThisInitialized(_this), props, _this.state);\n    return _this;\n  }\n\n  _createClass(Tabbordion, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var nextState = this.getNextState(nextProps, this.state); // only update if there were changes to the local component state\n\n      if (nextState !== this.state) {\n        this.setState(nextState);\n      }\n\n      var bemState = getStateBem(nextProps);\n\n      if ((0, _state.isShallowlyDifferent)(bemState, this.bemState)) {\n        this.subscribers.bem.forEach(function (component) {\n          return component.forceUpdate();\n        });\n        this.bemState = bemState;\n      }\n\n      var tabbordionState = getStateTabbordion(this, nextProps, nextState);\n\n      if ((0, _state.isShallowlyDifferent)(tabbordionState, this.tabbordionState)) {\n        this.subscribers.tabbordion.forEach(function (component) {\n          return component.forceUpdate();\n        });\n        this.tabbordionState = tabbordionState;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      tabbordionInstances--;\n      if (tabbordionInstances === 0) tabbordionUniqId = 0;\n    }\n  }, {\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      return this.childContext;\n    }\n    /*\n     * Controls props and does those nasty little staties we kills them My Precious, *gollum* *gollum*\n     * @param {object} props Props received by the component\n     * @param {object} prevState State contained in the component\n     * @param {array} initialPanels Initial panels state when component is mounted as a stateful component\n     * @return {object} State to be used by the component\n     */\n\n  }, {\n    key: \"getNextState\",\n    value: function getNextState(props, prevState, initialPanels) {\n      var panels = (0, _state.getArray)(prevState.stateful ? prevState.panels : initialPanels || props.panels);\n      var panelProps = [];\n      var usedIndexes = [];\n      var invalidIndexes = [];\n      var allowMultiChecked = props.mode === 'multiple'; // fragments force us to do some recursive looping to find our actual children as React.Children does not do it\n\n      var childPool = [props.children]; // this logic probably needs to be refactored so that panels register to tabbordion\n\n      while (childPool.length) {\n        _react.Children.forEach(childPool.shift(), function (child) {\n          if (child == null || !child.type) {\n            return;\n          }\n\n          var props = child.props || child._store && child._store.props || {};\n\n          if (child.type === _react.default.Fragment && props.children) {\n            childPool.push(props.children);\n          } else if (child.type.contextTypes && child.type.contextTypes.tabbordion) {\n            // use false to mark panels with invalid index\n            var index = props.index != null ? props.index : false; // missing index and duplicates are invalid\n\n            var isInvalidIndex = index === false || usedIndexes.includes(index);\n\n            if (isInvalidIndex) {\n              invalidIndexes.push(panelProps.length);\n            } else {\n              usedIndexes.push(index);\n            }\n\n            panelProps.push({\n              checked: props.checked,\n              disabled: props.disabled,\n              index: isInvalidIndex ? false : index,\n              visible: props.visible\n            });\n          }\n        });\n      } // time to fix invalid index values\n\n\n      var unusedIndex = 0;\n\n      while (invalidIndexes.length > 0) {\n        // find the next usable index value\n        while (usedIndexes.includes(unusedIndex)) {\n          unusedIndex++;\n        } // use the index value\n\n\n        panelProps[invalidIndexes.shift()].index = unusedIndex; // try another index on the next round\n\n        unusedIndex++;\n      } // now that we know the indexes we can link to existing data; if it happens to exist, of course\n\n\n      var checkedCount = 0;\n      var firstVisibleIndex = null;\n      var lastVisibleIndex = null;\n      var nextPanels = panelProps.map(function (props, index) {\n        var panel = panels.find(function (panel) {\n          return panel.index === props.index;\n        }) || {\n          checked: checked,\n          disabled: disabled,\n          visible: visible\n        };\n        var checked = (props.checked != null ? props.checked : !!panel.checked) && (allowMultiChecked || checkedCount === 0);\n        var disabled = props.disabled != null ? props.disabled : !!panel.disabled;\n        var visible = props.visible != null ? props.visible : panel.visible === false ? false : true;\n\n        if (visible) {\n          lastVisibleIndex = index;\n          if (firstVisibleIndex == null) firstVisibleIndex = lastVisibleIndex;\n        }\n\n        if (checked && visible) checkedCount++;\n        return {\n          checked: checked,\n          disabled: disabled,\n          index: props.index,\n          visible: visible\n        };\n      });\n\n      if (firstVisibleIndex != null) {\n        // one panel must always be checked in single mode\n        if (checkedCount === 0 && props.mode !== 'multiple' && props.mode !== 'toggle') {\n          nextPanels[firstVisibleIndex].checked = true;\n        } // it is now safe to use the actual indexes instead of references\n\n\n        firstVisibleIndex = nextPanels[firstVisibleIndex].index;\n        lastVisibleIndex = nextPanels[lastVisibleIndex].index;\n      } // keep in local state: We can do this in this way because these values are derived from main panels state.\n      //                      Also, this state is updated each time props change, thus we maintain \"pureness\".\n\n\n      this.firstVisibleIndex = firstVisibleIndex;\n      this.lastVisibleIndex = lastVisibleIndex; // determine who will own the state\n\n      var stateful = !props.onChange || !props.onPanels || !Array.isArray(props.panels);\n\n      if (stateful) {\n        // it is mine, my own, My Preciouss...\n        if (!prevState.stateful || (0, _state.isShallowlyDifferentArray)(prevState.panels, nextPanels)) {\n          if (props.onPanels) props.onPanels(nextPanels);\n          return {\n            panels: nextPanels,\n            stateful: stateful\n          };\n        }\n      } else {\n        // provide updated state to whomever will own it\n        if ((0, _state.isShallowlyDifferentArray)(panels, nextPanels)) {\n          props.onPanels(nextPanels);\n        } // clear local state\n\n\n        if (prevState.stateful) {\n          return {\n            panels: null,\n            stateful: stateful\n          };\n        }\n      }\n\n      return prevState;\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(index) {\n      var mode = this.props.mode;\n\n      if (!this.state.stateful) {\n        this.props.onChange({\n          index: index,\n          mode: mode\n        });\n        return;\n      } // we can mutate this state as we please because we own this state\n\n\n      var panel = this.state.panels.find(function (panel) {\n        return panel.index === index;\n      });\n\n      if (panel == null) {\n        throw new Error('Unexpected invalid panel index: ' + index);\n      }\n\n      var didMutate = false;\n\n      switch (mode) {\n        case 'toggle':\n          // only one can be active, but also none can be active (radio, but allow unselect)\n          this.state.panels.forEach(function (togglePanel) {\n            if (togglePanel !== panel && togglePanel.checked) {\n              togglePanel.checked = false;\n            }\n          });\n          panel.checked = !panel.checked;\n          didMutate = true;\n          break;\n\n        case 'multiple':\n          // no state restrictions/relations (checkbox)\n          panel.checked = !panel.checked;\n          didMutate = true;\n          break;\n\n        default:\n          // only one panel must stay active (radio)\n          this.state.panels.forEach(function (togglePanel) {\n            if (togglePanel !== panel && togglePanel.checked) {\n              togglePanel.checked = false;\n              didMutate = true;\n            }\n          });\n\n          if (!panel.checked) {\n            panel.checked = true;\n            didMutate = true;\n          }\n\n      }\n\n      if (didMutate) {\n        this.setState({\n          panels: this.state.panels.slice(0)\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // use destructuring to pick out props we don't need to pass to the rendered component\n      var _this$props = this.props,\n          animateContent = _this$props.animateContent,\n          children = _this$props.children,\n          Component = _this$props.component,\n          bemModifiers = _this$props.bemModifiers,\n          bemSeparator = _this$props.bemSeparator,\n          blockElements = _this$props.blockElements,\n          component = _this$props.component,\n          initialPanels = _this$props.initialPanels,\n          mode = _this$props.mode,\n          name = _this$props.name,\n          onChange = _this$props.onChange,\n          onPanels = _this$props.onPanels,\n          panelsProp = _this$props.panels,\n          props = _objectWithoutProperties(_this$props, [\"animateContent\", \"children\", \"component\", \"bemModifiers\", \"bemSeparator\", \"blockElements\", \"component\", \"initialPanels\", \"mode\", \"name\", \"onChange\", \"onPanels\", \"panels\"]);\n\n      var panel = 0;\n      var panels = this.state.stateful ? this.state.panels : panelsProp;\n      var childPool = [children];\n      var clones = [];\n\n      while (childPool.length) {\n        _react.Children.forEach(childPool.shift(), function (child) {\n          if (child == null || !child.type) {\n            clones.push(child);\n          } else if (child.type === _react.default.Fragment) {\n            childPool.push(child.props.children);\n          } else if (child.type.contextTypes && child.type.contextTypes.tabbordion) {\n            var clone = /*#__PURE__*/_react.default.cloneElement(child, panels[panel]);\n\n            panel++;\n            clones.push(clone);\n          } else {\n            clones.push(child);\n          }\n        });\n      }\n\n      return /*#__PURE__*/_react.default.createElement(Component, _extends({}, props, {\n        role: \"tablist\"\n      }), _react.Children.map(clones, identity));\n    }\n  }]);\n\n  return Tabbordion;\n}(_react.PureComponent);\n\nTabbordion.childContextTypes = {\n  bem: _propTypes.default.object,\n  tabbordion: _propTypes.default.object\n};\nTabbordion.defaultProps = {\n  animateContent: false,\n  bemModifiers: {\n    animated: 'animated',\n    between: 'between',\n    checked: 'checked',\n    content: 'content',\n    disabled: 'disabled',\n    enabled: 'enabled',\n    first: 'first',\n    hidden: 'hidden',\n    last: 'last',\n    noContent: 'no-content',\n    unchecked: 'unchecked'\n  },\n  bemSeparator: '--',\n  blockElements: {\n    animator: 'panel__animator',\n    content: 'panel__content',\n    label: 'panel__label',\n    panel: 'panel'\n  },\n  component: 'ul',\n  mode: 'single'\n};\nTabbordion.propTypes = {\n  animateContent: _propTypes.default.oneOf([false, 'height', 'marginTop']),\n  bemModifiers: _propTypes.default.shape({\n    between: _propTypes.default.string,\n    checked: _propTypes.default.string,\n    content: _propTypes.default.string,\n    disabled: _propTypes.default.string,\n    enabled: _propTypes.default.string,\n    first: _propTypes.default.string,\n    hidden: _propTypes.default.string,\n    last: _propTypes.default.string,\n    noContent: _propTypes.default.string,\n    unchecked: _propTypes.default.string\n  }),\n  bemSeparator: _propTypes.default.string,\n  blockElements: _propTypes.default.shape({\n    content: _propTypes.default.string,\n    label: _propTypes.default.string,\n    panel: _propTypes.default.string\n  }),\n  children: _propTypes.default.node,\n  className: _propTypes.default.string,\n  component: _propTypes.default.oneOfType([_propTypes.default.func, _propTypes.default.object, _propTypes.default.string]),\n  id: _propTypes.default.string,\n  initialPanels: _propTypes.default.arrayOf(_propTypes.default.shape({\n    checked: _propTypes.default.bool,\n    disabled: _propTypes.default.bool,\n    index: _propTypes.default.number,\n    visible: _propTypes.default.bool\n  })),\n  mode: _propTypes.default.oneOf(['single', 'toggle', 'multiple']),\n  name: _propTypes.default.string,\n  onChange: _propTypes.default.func,\n  onPanels: _propTypes.default.func,\n  panels: _propTypes.default.arrayOf(_propTypes.default.shape({\n    checked: _propTypes.default.bool,\n    disabled: _propTypes.default.bool,\n    index: _propTypes.default.number,\n    visible: _propTypes.default.bool\n  }))\n};\nvar _default = Tabbordion;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}