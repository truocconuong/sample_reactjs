{"ast":null,"code":"var _jsxFileName = \"/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/UpdateClient/UpdateClient.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { EditorState, convertToRaw, convertFromHTML, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\nimport Network from '../../Service/Network';\nimport Fbloader from '../libs/PageLoader/fbloader';\nimport _ from 'lodash';\nimport { Redirect } from 'react-router-dom';\nimport { rulesAddAndUpdateClient } from '../../utils/rule';\nimport Validator from '../../utils/validator';\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\nimport CustomToast from \"../common/CustomToast\";\nconst api = new Network();\n\nclass UpdateClient extends Component {\n  constructor(props) {\n    super();\n\n    this.setDefaultState = () => {\n      this.setState({\n        scrollBehaviour: \"inside\",\n        isOpen: true,\n        name: '',\n        website: '',\n        about: '',\n        editorAbout: EditorState.createEmpty()\n      });\n    };\n\n    this.onEditorStateChange = editorState => {\n      this.setState({\n        editorAbout: editorState,\n        about: draftToHtml(convertToRaw(editorState.getCurrentContent()))\n      });\n    };\n\n    this.redirectToClient = () => {\n      this.setState({\n        redirectToClient: true\n      });\n    };\n\n    this.state = {\n      scrollBehaviour: \"inside\",\n      isOpen: true,\n      name: '',\n      website: '',\n      about: '',\n      editorAbout: EditorState.createEmpty(),\n      redirectToClient: false,\n      errors: {}\n    };\n    this.validator = new Validator(rulesAddAndUpdateClient);\n  }\n\n  handleInputChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  async updateClient(e) {\n    e.preventDefault();\n    const errors = this.validator.validate(this.state);\n    this.setState({\n      errors: errors\n    });\n\n    if (this.isEmpty(errors)) {\n      const {\n        name,\n        website,\n        about\n      } = this.state;\n      const data = {\n        name,\n        website,\n        about\n      };\n\n      try {\n        const response = await api.patch(`/api/admin/client/${this.props.id}`, data);\n\n        if (response) {\n          toast( /*#__PURE__*/React.createElement(CustomToast, {\n            title: \"Update client successed !\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }\n          }), {\n            position: toast.POSITION.BOTTOM_RIGHT,\n            autoClose: 3000,\n            className: \"toast_login\",\n            closeButton: false,\n            hideProgressBar: true,\n            newestOnTop: true,\n            closeOnClick: true,\n            rtl: false,\n            pauseOnFocusLoss: true,\n            draggable: true,\n            pauseOnHover: true,\n            transition: Zoom\n          });\n          this.redirectToClient();\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n\n  async getData() {\n    const {\n      id\n    } = this.props;\n    let self = this;\n    self.setState({\n      isLoading: true\n    });\n    const response = await api.get(`/api/client/${id}`);\n\n    if (response) {\n      const data = response.data.client;\n      const blocksFromHTML = convertFromHTML(data.about);\n      const content = ContentState.createFromBlockArray(blocksFromHTML.contentBlocks, blocksFromHTML.entityMap);\n      data.editorAbout = EditorState.createWithContent(content);\n\n      const dataUpdate = _.assign(this.state, data);\n\n      this.setState(dataUpdate);\n    }\n\n    setTimeout(() => {\n      self.setState({\n        isLoading: false\n      });\n    }, 1200);\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  isEmpty(obj) {\n    // check obj empty\n    return Object.keys(obj).length === 0 && obj.constructor === Object;\n  }\n\n  render() {\n    const self = this;\n    const {\n      editorAbout,\n      errors\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: `d-flex flex-column flex-row-fluid wrapper  ${this.props.className_wrap_broad}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ToastContainer, {\n      closeOnClick: true,\n      autoClose: 1000,\n      rtl: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }), this.state.redirectToClient ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/client\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 40\n      }\n    }) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content d-flex flex-column flex-column-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }, this.state.isLoading ? /*#__PURE__*/React.createElement(Fbloader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 35\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"subheader py-3 py-lg-8 subheader-transparent\",\n      id: \"kt_subheader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-baseline flex-wrap mr-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-custom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header flex-wrap border-0 pt-6 pb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, \"Update client\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-toolbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown dropdown-inline mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      onSubmit: this.updateClient.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 27\n      }\n    }, \"Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: this.handleInputChange.bind(this),\n      name: \"name\",\n      className: errors.name ? \"form-control is-invalid\" : \"form-control\",\n      placeholder: \"Enter name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 27\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 27\n      }\n    }, \"Website:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.website,\n      onChange: this.handleInputChange.bind(this),\n      name: \"website\",\n      className: errors.website ? \"form-control is-invalid\" : \"form-control\",\n      placeholder: \"Enter website\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 27\n      }\n    }, \"About:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(Editor, {\n      editorState: editorAbout,\n      wrapperClassName: \"demo-wrapper\",\n      editorClassName: \"demo-editor\",\n      onEditorStateChange: this.onEditorStateChange,\n      editorStyle: {\n        border: \"1px solid #F1F1F1\",\n        height: \"250px\"\n      },\n      toolbar: {\n        colorPicker: {\n          colors: ['rgb(21, 188, 197)', 'rgb(33, 37, 41)', 'rgb(97,189,109)', 'rgb(26,188,156)', 'rgb(84,172,210)', 'rgb(44,130,201)', 'rgb(147,101,184)', 'rgb(71,85,119)', 'rgb(204,204,204)', 'rgb(65,168,95)', 'rgb(0,168,133)', 'rgb(61,142,185)', 'rgb(41,105,176)', 'rgb(85,57,130)', 'rgb(40,50,78)', 'rgb(0,0,0)', 'rgb(247,218,100)', 'rgb(251,160,38)', 'rgb(235,107,86)', 'rgb(226,80,65)', 'rgb(163,143,132)', 'rgb(239,239,239)', 'rgb(255,255,255)', 'rgb(250,197,28)', 'rgb(243,121,52)', 'rgb(209,72,65)', 'rgb(184,49,47)', 'rgb(124,112,107)', 'rgb(209,213,216)']\n        },\n        fontFamily: {\n          options: ['Muli', 'sans-serif', 'Arial', 'Georgia', 'Impact', 'Tahoma', 'Times New Roman', 'Verdana']\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 29\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-footer card-footer-cus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-cus__right text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 25\n      }\n    }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"reset\",\n      className: \"btn btn-secondary\",\n      onClick: () => {\n        this.redirectToClient();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 25\n      }\n    }, \"Cancel\"))))))))));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    className_wrap_broad: state.ui.className_wrap_broad,\n    id: ownProps.match.params.id\n  };\n};\n\nexport default connect(mapStateToProps)(UpdateClient);","map":{"version":3,"sources":["/Users/asknteach/projects/fetch/portal.fetch.tech.frontend/src/Components/UpdateClient/UpdateClient.js"],"names":["React","Component","connect","EditorState","convertToRaw","convertFromHTML","ContentState","Editor","draftToHtml","htmlToDraft","Network","Fbloader","_","Redirect","rulesAddAndUpdateClient","Validator","ToastContainer","toast","Zoom","CustomToast","api","UpdateClient","constructor","props","setDefaultState","setState","scrollBehaviour","isOpen","name","website","about","editorAbout","createEmpty","onEditorStateChange","editorState","getCurrentContent","redirectToClient","state","errors","validator","handleInputChange","event","target","value","updateClient","e","preventDefault","validate","isEmpty","data","response","patch","id","position","POSITION","BOTTOM_RIGHT","autoClose","className","closeButton","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","transition","error","console","log","getData","self","isLoading","get","client","blocksFromHTML","content","createFromBlockArray","contentBlocks","entityMap","createWithContent","dataUpdate","assign","setTimeout","componentDidMount","obj","Object","keys","length","render","className_wrap_broad","bind","border","height","colorPicker","colors","fontFamily","options","mapStateToProps","ownProps","ui","match","params"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { EditorState, convertToRaw, convertFromHTML, ContentState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\nimport Network from '../../Service/Network';\nimport Fbloader from '../libs/PageLoader/fbloader';\nimport _ from 'lodash'\nimport { Redirect } from 'react-router-dom';\nimport { rulesAddAndUpdateClient } from '../../utils/rule';\nimport Validator from '../../utils/validator';\nimport { ToastContainer, toast, Zoom } from \"react-toastify\";\nimport CustomToast from \"../common/CustomToast\";\n\nconst api = new Network();\n\nclass UpdateClient extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      scrollBehaviour: \"inside\",\n      isOpen: true,\n      name: '',\n      website: '',\n      about: '',\n      editorAbout: EditorState.createEmpty(),\n      redirectToClient: false,\n      errors: {}\n    };\n    this.validator = new Validator(rulesAddAndUpdateClient);\n  }\n\n  setDefaultState = () => {\n    this.setState({\n      scrollBehaviour: \"inside\",\n      isOpen: true,\n      name: '',\n      website: '',\n      about: '',\n      editorAbout: EditorState.createEmpty(),\n    })\n  }\n  onEditorStateChange = (editorState) => {\n    this.setState({\n      editorAbout: editorState,\n      about: draftToHtml(convertToRaw(editorState.getCurrentContent()))\n    });\n  };\n\n  handleInputChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    this.setState({\n      [name]: value,\n    });\n  }\n\n\n  async updateClient(e) {\n    e.preventDefault();\n    const errors = this.validator.validate(this.state);\n    this.setState({\n      errors: errors,\n    });\n\n    if (this.isEmpty(errors)) {\n      const { name, website, about } = this.state\n      const data = {\n        name, website, about\n      }\n      try {\n        const response = await api.patch(`/api/admin/client/${this.props.id}`, data);\n        if (response) {\n            toast(<CustomToast title={\"Update client successed !\"} />, {\n            position: toast.POSITION.BOTTOM_RIGHT,\n            autoClose: 3000,\n            className: \"toast_login\",\n            closeButton: false,\n            hideProgressBar: true,\n            newestOnTop: true,\n            closeOnClick: true,\n            rtl: false,\n            pauseOnFocusLoss: true,\n            draggable: true,\n            pauseOnHover: true,\n            transition: Zoom,\n          });\n          this.redirectToClient();\n        }\n\n      } catch (error) {\n        console.log(error)\n      }\n    }\n  }\n  async getData() {\n    const { id } = this.props;\n\n    let self = this;\n    self.setState({\n      isLoading: true,\n    });\n\n    const response = await api.get(`/api/client/${id}`)\n    if (response) {\n      const data = response.data.client;\n      const blocksFromHTML = convertFromHTML(data.about);\n      const content = ContentState.createFromBlockArray(\n        blocksFromHTML.contentBlocks,\n        blocksFromHTML.entityMap\n      );\n      data.editorAbout = EditorState.createWithContent(content)\n      const dataUpdate = _.assign(this.state, data);\n      this.setState(dataUpdate)\n    }\n\n\n    setTimeout(() => {\n      self.setState({\n        isLoading: false\n      })\n    }, 1200)\n\n  }\n\n  redirectToClient = () => {\n    this.setState({ redirectToClient: true })\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  isEmpty(obj) {\n    // check obj empty\n    return Object.keys(obj).length === 0 && obj.constructor === Object;\n  }\n\n  render() {\n    const self = this;\n    const { editorAbout, errors } = this.state\n\n\n    return (\n      <div\n        className={`d-flex flex-column flex-row-fluid wrapper  ${this.props.className_wrap_broad}`}\n      >\n        <ToastContainer closeOnClick autoClose={1000} rtl={false} />\n        {this.state.redirectToClient ? <Redirect to=\"/client\" /> : ''}\n        <div className=\"content d-flex flex-column flex-column-fluid\">\n          {this.state.isLoading ? <Fbloader /> : null}\n\n          <div\n            className=\"subheader py-3 py-lg-8 subheader-transparent\"\n            id=\"kt_subheader\"\n          >\n            <div className=\"container d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap\">\n             \n              <div className=\"d-flex align-items-center mr-1\">\n             \n                <div className=\"d-flex align-items-baseline flex-wrap mr-5\">\n                \n                </div>\n               \n              </div>\n           \n              <div className=\"d-flex align-items-center flex-wrap\"></div>\n             \n            </div>\n          </div>\n          <div className=\"d-flex flex-column-fluid\">\n            <div className=\"container\">\n              <div className=\"card card-custom\">\n                <div className=\"card-header flex-wrap border-0 pt-6 pb-0\">\n                  <div className=\"card-title\">\n                    <h3 className=\"card-label\">\n                      Update client\n                    \n                    </h3>\n                  </div>\n                  <div className=\"card-toolbar\">\n                    <div className=\"dropdown dropdown-inline mr-2\">\n                    \n                    </div>\n                  </div>\n                </div>\n                <div className=\"card-body\">\n                  <form className=\"form\" onSubmit={this.updateClient.bind(this)}>\n                    <div className=\"card-body\">\n                      <div className=\"form-group row\">\n                        <div className=\"col-lg-6\">\n                          <label>Name:</label>\n                          <input type=\"text\" value={this.state.name} onChange={this.handleInputChange.bind(this)} name=\"name\" className={\n                            errors.name\n                              ? \"form-control is-invalid\"\n                              : \"form-control\"\n                          } placeholder=\"Enter name\" />\n                        </div>\n                        <div className=\"col-lg-6\">\n                          <label>Website:</label>\n                          <input type=\"text\" value={this.state.website} onChange={this.handleInputChange.bind(this)} name=\"website\" className={\n                            errors.website\n                              ? \"form-control is-invalid\"\n                              : \"form-control\"\n                          } placeholder=\"Enter website\" />\n                        </div>\n                      </div>\n                      <div className=\"form-group row\">\n                        <div className=\"col-lg-12\">\n                          <label>About:</label>\n                          <div>\n                            <Editor\n                              editorState={editorAbout}\n                              wrapperClassName=\"demo-wrapper\"\n                              editorClassName=\"demo-editor\"\n                              onEditorStateChange={this.onEditorStateChange}\n                              editorStyle={{ border: \"1px solid #F1F1F1\", height: \"250px\" }}\n                              toolbar={{\n                                colorPicker: { colors: ['rgb(21, 188, 197)', 'rgb(33, 37, 41)' , 'rgb(97,189,109)', 'rgb(26,188,156)', 'rgb(84,172,210)', 'rgb(44,130,201)',\n                                'rgb(147,101,184)', 'rgb(71,85,119)', 'rgb(204,204,204)', 'rgb(65,168,95)', 'rgb(0,168,133)',\n                                'rgb(61,142,185)', 'rgb(41,105,176)', 'rgb(85,57,130)', 'rgb(40,50,78)', 'rgb(0,0,0)',\n                                'rgb(247,218,100)', 'rgb(251,160,38)', 'rgb(235,107,86)', 'rgb(226,80,65)', 'rgb(163,143,132)',\n                                'rgb(239,239,239)', 'rgb(255,255,255)', 'rgb(250,197,28)', 'rgb(243,121,52)', 'rgb(209,72,65)',\n                                'rgb(184,49,47)', 'rgb(124,112,107)', 'rgb(209,213,216)'], },\n                                fontFamily: {\n                                  options: ['Muli', 'sans-serif', 'Arial', 'Georgia', 'Impact', 'Tahoma', 'Times New Roman', 'Verdana'],\n                                }\n                              }}\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"card-footer card-footer-cus\">\n                      <div className=\"modal-cus__right text-right\">\n                        <button type=\"submit\" className=\"btn btn-primary mr-2\">Save</button>\n                        <button type=\"reset\" className=\"btn btn-secondary\" onClick={() => {\n                          this.redirectToClient();\n                        }}>Cancel</button>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    className_wrap_broad: state.ui.className_wrap_broad,\n    id: ownProps.match.params.id\n  };\n};\n\nexport default connect(mapStateToProps)(UpdateClient);\n"]},"metadata":{},"sourceType":"module"}